<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <title>showonne</title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/tomorrow-night.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
<meta name="generator" content="Hexo 5.4.2"></head>
<body>
    <header>
    <span class="banner"><a href="/">showonne</a></span>
    <span class="menu">Menu</span>
    <ul class="menu_list hide">
        
            <li><a href="/" >Home</a></li>
        
            <li><a href="/archives" >Archives</a></li>
        
            <li><a href="/tags" >Tags</a></li>
        
            <li><a href="/links" >Links</a></li>
        
            <li><a href="/about" >About</a></li>
        
    </ul>
</header>
    <div class="main">
        
    <article>
    <h1 class='post-title'>
        <span>兼容iPhoneX刘海屏</span>
    </h1>
    <section class='post-content'>
        
            
        
        <p>最近在做一个WebApp，需要兼容 iPhoneX 的刘海屏幕，iPhoneX 与其他屏幕最主要的区别就是顶部的刘海和底部的小黑条。如果网页没有针对他们做过任何兼容，页面的部分内容就会被这两部分遮挡。因此官方也针对这种情况推出了一些新的设计规范和对应的解决方案。</p>
<span id="more"></span>
<h2 id="安全区域"><a href="#安全区域" class="headerlink" title="安全区域"></a>安全区域</h2><p>安全区域就是视窗里不会受到圆角，顶部状态栏和底部操作栏影响的区域，对 iPhoneX 的适配，就可以转化为将可视内容都放在安全区域来做，对于会被影响到的地方，采用 <code>padding</code> 填充。</p>
<div style="display: flex;"><br><img height="300" src="https://developer.apple.com/design/human-interface-guidelines/ios/images/LayoutGuides_Portrait.svg"><br><img height="300" src="https://developer.apple.com/design/human-interface-guidelines/ios/images/LayoutGuides_Landscape.svg"><br></div>

<h2 id="1-使用整个屏幕"><a href="#1-使用整个屏幕" class="headerlink" title="1. 使用整个屏幕"></a>1. 使用整个屏幕</h2><p>第一个特性叫<code>viewport-fit</code>，是对 <code>viewport</code> 拓展的元标签，用来控制插入行为。这一特性在 <strong>iOS 11</strong> 中可用。默认值是 <code>auto</code>，可以设置成 <code>cover</code> 让页面布局充满屏幕：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&#x27;viewport&#x27;</span> <span class="attr">content</span>=<span class="string">&#x27;initial-scale=1, viewport-fit=cover&#x27;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-考虑安全区域"><a href="#2-考虑安全区域" class="headerlink" title="2. 考虑安全区域"></a>2. 考虑安全区域</h2><p>先让页面布局充满屏幕，再通过 <code>padding</code> 将内容控制在安全区域内就可以完美兼容了。为此，WebKit 在 <strong>iOS 11</strong> 引入了一个新的CSS函数 <code>env()</code> 和一组预定义的环境变量 <code>safe-area-inset-left</code>, <code>safe-area-inset-right</code>, <code>safe-area-inset-top</code> 和 <code>safe-area-inset-bottom</code>，它们组合在一起就能展示出安全区域的范围了：</p>
<p><img height="300" src="https://webkit.org/wp-content/uploads/safe-areas-1.png"></p>
<blockquote>
<p>在 iOS 11 中，<code>env()</code> 函数叫做 <code>constant()</code>，从 <code>Safari Technology Preview 41</code> 和 <code>iOS 11.2 beta</code> 开始，<code>constant()</code> 就被移除了，可以利用 CSS 的 fallback 机制兼容不同版本。</p>
</blockquote>
<p><code>env()</code> 的用法和 <code>var()</code> 一样，比如用在 <code>padding</code> 中：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.body</span> &#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="built_in">env</span>(safe-area-inset-left);</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="built_in">env</span>(safe-area-inset-right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol>
<li>只有设置了 <code>viewport-fit=cover</code>，<code>env()</code> 才会起作用。</li>
</ol>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>其实客户端启动 WebView 时，也可以直接使用安全区域布局，这样就不需要页面来兼容。</p>

    </section>
    
        <section id="comments">
        
        </section>
    
</article>

    </div>
    <button class="feedback-btn" data-feedbackok-trigger>Hello~ 🥰</button>
    <footer>
    <div class="info"><span>Powered By <a href="https://hexo.io/" target="blank">Hexo</a></span>&nbsp;&nbsp;&nbsp;&nbsp;<span>Theme by <a href="https://github.com/showonne/hexo_showonne" target="blank">Showonne</a></span></div>
</footer>
    <script
        src="https://cdn.feedbackok.com/widget.js"
        data-pid="0m524p3"
        async
        defer
    ></script>
    
<script src="/js/index.js"></script>

</body>
</html>
