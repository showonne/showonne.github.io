<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <title>showonne</title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/tomorrow-night.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
<meta name="generator" content="Hexo 5.4.2"></head>
<body>
    <header>
    <span class="banner"><a href="/">showonne</a></span>
    <span class="menu">Menu</span>
    <ul class="menu_list hide">
        
            <li><a href="/" >Home</a></li>
        
            <li><a href="/archives" >Archives</a></li>
        
            <li><a href="/tags" >Tags</a></li>
        
            <li><a href="/links" >Links</a></li>
        
            <li><a href="/about" >About</a></li>
        
    </ul>
</header>
    <div class="main">
        
    <article>
    <h1 class='post-title'>
        <span>[è¯‘]å¦‚ä½•ä½¿ç”¨Rollupæ‰“åŒ…æ ·å¼æ–‡ä»¶å¹¶æ·»åŠ LiveReload</span>
    </h1>
    <section class='post-content'>
        
            
        
        <p>é€šè¿‡è¿™ä¸ªæ•™ç¨‹å­¦ä¹ å¦‚ä½•ä½¿ç”¨JavaScriptæ‰“åŒ…å·¥å…·Rollupé…åˆPostCSSæ¥å–ä»£Gruntæˆ–Gulpå¤„ç†æ ·å¼æ–‡ä»¶ã€‚</p>
<p>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†<a target="_blank" rel="noopener" href="https://code.lengstorf.com/learn-rollup-js/">ä½¿ç”¨Rollupæ‰“åŒ…å‰ç«¯JavaScriptå…¥é—¨</a>ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« åŒ…å«<code>Part II</code>å’Œ<code>Part III</code>ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://code.lengstorf.com/learn-rollup-css/#stylesheets">Part II</a>ä¼šç»§ç»­åœ¨ä¸Šæ¬¡çš„é¡¹ç›®ä¸­è¿›è¡Œï¼Œä¸ºRollupæ·»åŠ å¤„ç†æ ·å¼çš„èƒ½åŠ›ï¼Œä½¿ç”¨PostCSSè¿›è¡Œä¸€äº›è½¬æ¢ï¼Œè®©æˆ‘ä»¬èƒ½ä½¿ç”¨æ›´ç®€å•çš„å˜é‡å†™æ³•å’ŒåµŒå¥—è§„åˆ™ç­‰è¯­æ³•ç³–ã€‚</p>
<p>ç„¶åå®Œæˆ<a target="_blank" rel="noopener" href="https://code.lengstorf.com/learn-rollup-css/#livereload">Part III</a>ï¼Œåœ†æ»¡ç»“æŸã€‚ç¬¬ä¸‰éƒ¨åˆ†å°†ä¸ºé¡¹ç›®æ·»åŠ æ–‡ä»¶ç›‘å¬å’ŒLiveReloadï¼Œè¿™æ ·æ¯å½“æ–‡ä»¶å˜åŒ–æ—¶å°±ä¸ç”¨å†æ‰‹åŠ¨åœ°æ‰“åŒ…bundleæ–‡ä»¶äº†ã€‚</p>
<span id="more"></span>
<h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><p>æˆ‘ä»¬ä¼šåœ¨ä¸Šå‘¨çš„é¡¹ç›®åŸºç¡€ä¸Šç»§ç»­è¿›è¡Œï¼Œå› æ­¤å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹ä¸Šä¸€èŠ‚ï¼Œæ¨èä½ <a target="_blank" rel="noopener" href="https://code.lengstorf.com/learn-rollup-js/">å…ˆçœ‹ä¸€ä¸‹</a>ã€‚</p>
<blockquote>
<p>NOTE: å¦‚æœä½ æ²¡æœ‰é¡¹ç›®çš„å‰¯æœ¬ï¼Œä½ å¯ä»¥é€šè¿‡è¿™æ¡å‘½ä»¤å…‹éš†åœ¨Part Iç»“æŸè¿™ä¸ªçŠ¶æ€ä¸‹çš„é¡¹ç›®ï¼š<code>git clone -b part-2-starter --single-branch https://github.com/jlengstorf/learn-rollup.git</code></p>
</blockquote>
<h2 id="Part-IIï¼šå¦‚ä½•åœ¨ä¸‹ä¸€ä»£åº”ç”¨ä¸­ä½¿ç”¨Rollup-jsï¼š-PostCSS"><a href="#Part-IIï¼šå¦‚ä½•åœ¨ä¸‹ä¸€ä»£åº”ç”¨ä¸­ä½¿ç”¨Rollup-jsï¼š-PostCSS" class="headerlink" title="Part IIï¼šå¦‚ä½•åœ¨ä¸‹ä¸€ä»£åº”ç”¨ä¸­ä½¿ç”¨Rollup.jsï¼š PostCSS"></a>Part IIï¼šå¦‚ä½•åœ¨ä¸‹ä¸€ä»£åº”ç”¨ä¸­ä½¿ç”¨Rollup.jsï¼š PostCSS</h2><p>ä½ å¯ä»¥è½»æ¾åœ°å¤„ç†CSSå¹¶æ³¨å…¥åˆ°æ–‡æ¡£çš„<code>head</code>ä¸­ï¼Œè¿™å–å†³äºä½ çš„é¡¹ç›®å¦‚ä½•é…ç½®ï¼Œä¹Ÿæ˜¯Rollupå¦ä¸€ä¸ªä¼˜ç‚¹ã€‚</p>
<p>å¦å¤–ï¼Œæ‰€æœ‰çš„æ„å»ºè¿‡ç¨‹éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œé™ä½äº†å¼€å‘æµç¨‹çš„å¤æ‚åº¦ - è¿™å¯¹æˆ‘ä»¬å¾ˆæœ‰å¸®åŠ©ï¼Œå°¤å…¶æ˜¯åœ¨å›¢é˜Ÿåä½œæ—¶ã€‚</p>
<p>ä¸è¿‡ç³Ÿç³•çš„æ˜¯ï¼Œæˆ‘ä»¬ä½¿å¾—æ ·å¼ä¾èµ–JavaScriptï¼Œå¹¶ä¸”åœ¨æ— æ ·å¼HTMLåœ¨æ ·å¼æ³¨å…¥å‰ä¼šäº§ç”Ÿä¸€ä¸ªçŸ­æš‚çš„é—ªçƒã€‚è¿™å¯¹æœ‰äº›é¡¹ç›®æ¥è¯´æ˜¯æ— æ³•æ¥å—çš„ï¼Œå¹¶ä¸”åº”è¯¥é€šè¿‡åƒä½¿ç”¨PostCSSæå–ç­‰æ–¹å¼è§£å†³ã€‚</p>
<p>æ—¢ç„¶è¿™ç¯‡æ–‡ç« æ˜¯å…³äºRollupçš„ï¼Œé‚£ä¹ˆï¼šæ¥å§ã€‚è®©æˆ‘ä»¬ä½¿ç”¨Rollupï¼</p>
<h4 id="STEP-0-åœ¨main-jsä¸­åŠ è½½æ ·å¼ã€‚"><a href="#STEP-0-åœ¨main-jsä¸­åŠ è½½æ ·å¼ã€‚" class="headerlink" title="STEP 0: åœ¨main.jsä¸­åŠ è½½æ ·å¼ã€‚"></a>STEP 0: åœ¨<code>main.js</code>ä¸­åŠ è½½æ ·å¼ã€‚</h4><p>å¦‚æœä½ ä¹‹å‰ä»æ¥æ²¡ç”¨è¿‡æ„å»ºå·¥å…·ï¼Œå¯èƒ½æ„Ÿè§‰è¿™æ ·æœ‰ç‚¹æ€ªï¼Œä½†è¯·è·Ÿç€æˆ‘ç»§ç»­ã€‚ä¸ºäº†åœ¨æ–‡æ¡£ä¸­ä½¿ç”¨æ ·å¼ï¼Œæˆ‘ä»¬ä¸ä¼šåƒå¹³å¸¸é‚£æ ·ä½¿ç”¨<code>&lt;link&gt;</code>æ ‡ç­¾ï¼Œå–è€Œä»£ä¹‹ï¼Œæˆ‘ä»¬å°†åœ¨<code>main.min.js</code>ä¸­ä½¿ç”¨<code>import</code>è¯­å¥ã€‚</p>
<p>ç°åœ¨åœ¨<code>src/scripts/main.js</code>å¼€å¤´åŠ è½½æ ·å¼ï¼š</p>
<pre><code>+ // Import styles (automatically injected into &lt;head&gt;).
+ import &apos;../styles/main.css&apos;;

  // Import a couple modules for testing.
  import &#123; sayHelloTo &#125; from &apos;./modules/mod1&apos;;
  import addArray from &apos;./modules/mod2&apos;;

  // Import a logger for easier debugging.
  import debug from &apos;debug&apos;;
  const log = debug(&apos;app:log&apos;);

  // The logger should only be disabled if weâ€™re not in production.
  if (ENV !== &apos;production&apos;) &#123;

    // Enable the logger.
    debug.enable(&apos;*&apos;);
    log(&apos;Logging is enabled!&apos;);
  &#125; else &#123;
    debug.disable();
  &#125;

  // Run some functions from our imported modules.
  const result1 = sayHelloTo(&apos;Jason&apos;);
  const result2 = addArray([1, 2, 3, 4]);

  // Print the results on the page.
  const printTarget = document.getElementsByClassName(&apos;debug__output&apos;)[0];

  printTarget.innerText = `sayHelloTo(&apos;Jason&apos;) =&gt; $&#123;result1&#125;\n\n`;
  printTarget.innerText += `addArray([1, 2, 3, 4]) =&gt; $&#123;result2&#125;`;
</code></pre><h4 id="STEP-1-å®‰è£…PostCSS-Rollupæ’ä»¶ã€‚"><a href="#STEP-1-å®‰è£…PostCSS-Rollupæ’ä»¶ã€‚" class="headerlink" title="STEP 1: å®‰è£…PostCSS Rollupæ’ä»¶ã€‚"></a>STEP 1: å®‰è£…PostCSS Rollupæ’ä»¶ã€‚</h4><p>é¦–å…ˆéœ€è¦Rollup PostCSSæ’ä»¶ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<blockquote>
<p>npm install â€“save-dev rollup-plugin-postcss</p>
</blockquote>
<h4 id="STEP-2-æ›´æ–°rollup-config-js"><a href="#STEP-2-æ›´æ–°rollup-config-js" class="headerlink" title="STEP 2: æ›´æ–°rollup.config.js."></a>STEP 2: æ›´æ–°<code>rollup.config.js</code>.</h4><p>ç„¶åï¼Œæ·»åŠ æ’ä»¶åˆ°<code>rollup.config.js</code>:</p>
<pre><code>  // Rollup plugins
  import babel from &apos;rollup-plugin-babel&apos;;
  import eslint from &apos;rollup-plugin-eslint&apos;;
  import resolve from &apos;rollup-plugin-node-resolve&apos;;
  import commonjs from &apos;rollup-plugin-commonjs&apos;;
  import replace from &apos;rollup-plugin-replace&apos;;
  import uglify from &apos;rollup-plugin-uglify&apos;;
+ import postcss from &apos;rollup-plugin-postcss&apos;;

  export default &#123;
    entry: &apos;src/scripts/main.js&apos;,
    dest: &apos;build/js/main.min.js&apos;,
    format: &apos;iife&apos;,
    sourceMap: &apos;inline&apos;,
    plugins: [
+     postcss(&#123;
+       extensions: [ &apos;.css&apos; ],
+     &#125;),
      resolve(&#123;
        jsnext: true,
        main: true,
        browser: true,
      &#125;),
      commonjs(),
      eslint(&#123;
        exclude: [
          &apos;src/styles/**&apos;,
        ]
      &#125;),
      babel(&#123;
        exclude: &apos;node_modules/**&apos;,
      &#125;),
      replace(&#123;
        ENV: JSON.stringify(process.env.NODE_ENV || &apos;development&apos;),
      &#125;),
      (process.env.NODE_ENV === &apos;production&apos; &amp;&amp; uglify()),
    ],
  &#125;;
</code></pre><h4 id="çœ‹ä¸€ä¸‹ç”Ÿæˆçš„bundleã€‚"><a href="#çœ‹ä¸€ä¸‹ç”Ÿæˆçš„bundleã€‚" class="headerlink" title="çœ‹ä¸€ä¸‹ç”Ÿæˆçš„bundleã€‚"></a>çœ‹ä¸€ä¸‹ç”Ÿæˆçš„bundleã€‚</h4><p>ç°åœ¨æˆ‘ä»¬å·²ç»èƒ½å¤Ÿå¤„ç†æ ·å¼äº†ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æ–°ç”Ÿæˆçš„bundleï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<p>è¿è¡Œ<code>./node_modules/.bin/rollup -c</code>ï¼Œç„¶åçœ‹ä¸€ä¸‹ç”Ÿæˆçš„<code>build/js/main.min.js</code>ï¼Œåœ¨æ–‡ä»¶å¼€å¤´å‡ è¡Œï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªåå«<code>__$styleInject()</code>çš„æ–°å‡½æ•°ï¼š</p>
<pre><code>function __$styleInject(css) &#123;
  css = css || &apos;&apos;;
  var head = document.head || document.getElementsByTagName(&apos;head&apos;)[0];
  var style = document.createElement(&apos;style&apos;);
  style.type = &apos;text/css&apos;;
  if (style.styleSheet)&#123;
    style.styleSheet.cssText = css;
  &#125; else &#123;
    style.appendChild(document.createTextNode(css));
  &#125;
  head.appendChild(style);
&#125;
__$styleInject(&quot;/* Styles omitted for brevity... */&quot;);
</code></pre><p>ç®€å•åœ°è¯´ï¼Œè¿™ä¸ªå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ª<code>&lt;style&gt;</code>å…ƒç´ å¹¶è®¾ç½®æ ·å¼ï¼Œç„¶åæ·»åŠ åˆ°æ–‡æ¡£çš„<code>&lt;head&gt;</code>æ ‡ç­¾ä¸­ã€‚</p>
<p>å°±åœ¨è¿™ä¸ªå‡½æ•°å£°æ˜çš„ä¸‹æ–¹ï¼Œå¯ä»¥çœ‹åˆ°é€šè¿‡ä¼ å…¥æ ·å¼è°ƒç”¨è¯¥å‡½æ•°ï¼Œé€šè¿‡PostCSSè¾“å‡ºã€‚å¾ˆé…·ï¼Œä¸æ˜¯å—ï¼Ÿ</p>
<p>ä½†ç°åœ¨è¿™äº›æ ·å¼å¹¶æ²¡æœ‰çœŸæ­£åœ°è¢«å¤„ç†ï¼›PostCSSåªæ˜¯ç›´æ¥åœ°ä¼ è¾“äº†æˆ‘ä»¬çš„æ ·å¼ã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€äº›éœ€è¦çš„PostCSSæ’ä»¶ï¼Œä½¿å¾—æ ·å¼èƒ½åœ¨ç›®æ ‡æµè§ˆå™¨ä¸Šå·¥ä½œã€‚</p>
<h4 id="STEP-3-å®‰è£…å¿…è¦çš„PostCSSæ’ä»¶ã€‚"><a href="#STEP-3-å®‰è£…å¿…è¦çš„PostCSSæ’ä»¶ã€‚" class="headerlink" title="STEP 3: å®‰è£…å¿…è¦çš„PostCSSæ’ä»¶ã€‚"></a>STEP 3: å®‰è£…å¿…è¦çš„PostCSSæ’ä»¶ã€‚</h4><p>æˆ‘çˆ±PostCSSã€‚æˆ‘å·²ç»æ”¾å¼ƒLESSé˜µè¥äº†ï¼Œå½“æ‰€æœ‰äººéƒ½æŠ›å¼ƒLESSæ—¶ï¼Œæˆ‘å‘ç°è‡ªå·±æˆ–å¤šæˆ–å°‘è¢«å½±å“åŠ å…¥äº†Sassé˜µè¥ï¼Œåæ¥PostCSSå‡ºç°äº†æˆ‘å°±éå¸¸å¼€å¿ƒåœ°å»å­¦ã€‚</p>
<p>æˆ‘å–œæ¬¢å®ƒæ˜¯å› ä¸ºå®ƒæä¾›äº†éƒ¨åˆ†åœ¨LESSå’ŒSassä¸­æˆ‘å–œæ¬¢çš„åŠŸèƒ½ - åµŒå¥—ï¼Œç®€å•çš„å˜é‡ - è€Œä¸”æ²¡æœ‰å®Œå…¨æ”¾å¼ƒLESSå’ŒSassä¸­æˆ‘è®¤ä¸ºè¯±äººä¹Ÿå±é™©çš„åŠŸèƒ½ï¼Œæ¯”å¦‚é€»è¾‘è¿ç®—ã€‚</p>
<p>æˆ‘å–œæ¬¢å®ƒçš„æ’ä»¶æ¨¡å¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå«åšâ€œPostCSSâ€çš„è¯­è¨€ã€‚æˆ‘ä»¬å¯ä»¥åªé€‰æ‹©çœŸæ­£éœ€è¦çš„ç‰¹æ€§ - æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç§»é™¤ä¸æƒ³è¦çš„ç‰¹æ€§ã€‚</p>
<p>å› æ­¤åœ¨æˆ‘ä»¬çš„é¡¹ç›®é‡Œï¼Œåªä¼šä½¿ç”¨åˆ°å››ä¸ªæ’ä»¶ - ä¸¤ä¸ªæ˜¯è¯­æ³•ç³–ï¼Œä¸€ä¸ªç”¨æ¥åœ¨å…¼å®¹æ—§æµè§ˆå™¨çš„æ–°CSSç‰¹æ€§ï¼Œä¸€ä¸ªç”¨æ¥å‹ç¼©ï¼Œå‡å°‘ç”Ÿæˆçš„æ ·å¼æ–‡ä»¶å¤§å°ã€‚</p>
<ul>
<li><p><code>postcss-simple-vars</code> â€” å¯ä»¥ä½¿ç”¨Sassé£æ ¼çš„å˜é‡(e.g. <code>$myColor: #fff;</code>ï¼Œ<code>color: $myColor;</code>)è€Œä¸æ˜¯å†—é•¿çš„CSSè¯­æ³•(e.g. <code>:root &#123;--myColor: #fff&#125;</code>ï¼Œ<code>color: var(--myColor)</code>)ã€‚è¿™æ ·æ›´ç®€æ´ï¼›æˆ‘æ›´å–œæ¬¢è¾ƒçŸ­çš„è¯­æ³•ã€‚</p>
</li>
<li><p><code>postcss-nested</code> â€” å…è®¸ä½¿ç”¨åµŒå¥—è§„åˆ™ã€‚å®é™…ä¸Šæˆ‘ä¸ç”¨å®ƒå†™åµŒå¥—è§„åˆ™ï¼›æˆ‘ç”¨å®ƒç®€åŒ–<a target="_blank" rel="noopener" href="http://getbem.com/naming/">BEMå‹å¥½çš„é€‰æ‹©å™¨</a>çš„å†™æ³•å¹¶ä¸”åˆ’åˆ†æˆ‘çš„åŒºå—ï¼Œå…ƒç´ å’Œä¿®é¥°åˆ°å•ä¸ªCSSå—ã€‚</p>
</li>
<li><p><code>postcss-cssnext</code> â€” è¿™ä¸ªæ’ä»¶é›†ä½¿å¾—å¤§å¤šæ•°ç°ä»£CSSè¯­æ³•(<a target="_blank" rel="noopener" href="https://www.w3.org/Style/CSS/current-work">é€šè¿‡æœ€æ–°çš„CSSæ ‡å‡†</a>)å¯ç”¨ï¼Œç¼–è¯‘åç”šè‡³å¯ä»¥åœ¨ä¸æ”¯æŒæ–°ç‰¹æ€§çš„æ—§æµè§ˆå™¨ä¸­å·¥ä½œã€‚</p>
</li>
<li><p><code>cssnano</code> â€” å‹ç¼©ï¼Œå‡å°è¾“å‡ºCSSæ–‡ä»¶å¤§å°ã€‚ç›¸å½“äºJavaScriptä¸­å¯¹åº”çš„UglifyJSã€‚</p>
</li>
</ul>
<p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å®‰è£…æ’ä»¶ï¼š</p>
<blockquote>
<p>npm install â€“save-dev postcss-simple-vars postcss-nested postcss-cssnext cssnano</p>
</blockquote>
<h4 id="STEP-4-æ›´æ–°rollup-config-jsã€‚"><a href="#STEP-4-æ›´æ–°rollup-config-jsã€‚" class="headerlink" title="STEP 4: æ›´æ–°rollup.config.jsã€‚"></a>STEP 4: æ›´æ–°<code>rollup.config.js</code>ã€‚</h4><p>æ¥ä¸‹æ¥ï¼Œåœ¨<code>rollup.config.js</code>å¼•å…¥PostCSSæ’ä»¶ï¼Œåœ¨é…ç½®å¯¹è±¡çš„<code>plugins</code>å±æ€§ä¸Šæ·»åŠ ä¸€ä¸ª<code>postcss</code>ã€‚</p>
<pre><code>  // Rollup plugins
  import babel from &apos;rollup-plugin-babel&apos;;
  import eslint from &apos;rollup-plugin-eslint&apos;;
  import resolve from &apos;rollup-plugin-node-resolve&apos;;
  import commonjs from &apos;rollup-plugin-commonjs&apos;;
  import replace from &apos;rollup-plugin-replace&apos;;
  import uglify from &apos;rollup-plugin-uglify&apos;;
  import postcss from &apos;rollup-plugin-postcss&apos;;

+ // PostCSS plugins
+ import simplevars from &apos;postcss-simple-vars&apos;;
+ import nested from &apos;postcss-nested&apos;;
+ import cssnext from &apos;postcss-cssnext&apos;;
+ import cssnano from &apos;cssnano&apos;;

  export default &#123;
    entry: &apos;src/scripts/main.js&apos;,
    dest: &apos;build/js/main.min.js&apos;,
    format: &apos;iife&apos;,
    sourceMap: &apos;inline&apos;,
    plugins: [
      postcss(&#123;
+       plugins: [
+         simplevars(),
+         nested(),
+         cssnext(&#123; warnForDuplicates: false, &#125;),
+         cssnano(),
+       ],
        extensions: [ &apos;.css&apos; ],
      &#125;),
      resolve(&#123;
        jsnext: true,
        main: true,
        browser: true,
      &#125;),
      commonjs(),
      eslint(&#123;
        exclude: [
          &apos;src/styles/**&apos;,
        ]
      &#125;),
      babel(&#123;
        exclude: &apos;node_modules/**&apos;,
      &#125;),
      replace(&#123;
        ENV: JSON.stringify(process.env.NODE_ENV || &apos;development&apos;),
      &#125;),
      (process.env.NODE_ENV === &apos;production&apos; &amp;&amp; uglify()),
    ],
  &#125;;
</code></pre><blockquote>
<p>NOTE: åœ¨<code>cssnext()</code>ä¸­é…ç½®äº†<code>&#123; warnForDuplicates: false &#125;</code>æ˜¯å› ä¸ºå®ƒå’Œ<code>cssnano()</code>éƒ½ä½¿ç”¨äº†<a target="_blank" rel="noopener" href="https://github.com/postcss/autoprefixer">Autoprefixer</a>ï¼Œä¼šå¯¼è‡´ä¸€ä¸ªè­¦å‘Šã€‚ä¸ç”¨è®¡è¾ƒé…ç½®, æˆ‘ä»¬åªéœ€è¦çŸ¥é“å®ƒè¢«æ‰§è¡Œäº†ä¸¤æ¬¡(åœ¨è¿™ä¸ªä¾‹å­ä¸­æ²¡ä»€ä¹ˆåå¤„)å¹¶ä¸”å–æ¶ˆäº†è­¦å‘Šã€‚</p>
</blockquote>
<h4 id="æ£€æŸ¥-lt-head-gt-ä¸­çš„è¾“å‡ºå†…å®¹ã€‚"><a href="#æ£€æŸ¥-lt-head-gt-ä¸­çš„è¾“å‡ºå†…å®¹ã€‚" class="headerlink" title="æ£€æŸ¥&lt;head&gt;ä¸­çš„è¾“å‡ºå†…å®¹ã€‚"></a>æ£€æŸ¥<code>&lt;head&gt;</code>ä¸­çš„è¾“å‡ºå†…å®¹ã€‚</h4><p>æ’ä»¶å®‰è£…å®Œåï¼Œé‡æ–°æ„å»ºbundleæ–‡ä»¶ã€‚(<code>./node_modules/.bin/rollup -c</code>)ï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<code>build/index.html</code>ã€‚å¯ä»¥çœ‹åˆ°é¡µé¢æ˜¯æœ‰æ ·å¼çš„ï¼Œå¦‚æœæˆ‘ä»¬å®¡æŸ¥å…ƒç´ å¯ä»¥å‘ç°æ ·å¼è¢«æ³¨å…¥åˆ°é¡µé¢å¤´éƒ¨ï¼Œå‹ç¼©ç®€åŒ–ï¼Œæ·»åŠ æ‰€æœ‰æµè§ˆå™¨å‰ç¼€å’Œå…¶å®ƒæˆ‘ä»¬é¢„æœŸçš„ä¼˜ç‚¹ï¼š</p>
<blockquote>
<p>æ ·å¼è¢«PostCSSå¤„ç†å¹¶é€šè¿‡Rpllupæ³¨å…¥</p>
</blockquote>
<p>å¤ªæ£’äº†ï¼æˆ‘ä»¬ç°åœ¨æ‹¥æœ‰ååˆ†å¯é çš„æ„å»ºæµç¨‹ï¼šJavaScriptä¼šè¢«æ‰“åŒ…ï¼Œæ— ç”¨çš„ä»£ç ä¼šè¢«ç§»é™¤ï¼Œè¾“å‡ºæ–‡ä»¶æ˜¯ç»è¿‡å‹ç¼©ç²¾ç®€çš„ï¼Œæ ·å¼æ—¶é€šè¿‡PostCSSå¤„ç†åæ³¨å…¥åˆ°æ–‡æ¡£å¤´éƒ¨çš„ã€‚</p>
<p>ç„¶è€Œï¼Œæœ€åä»ç„¶å­˜åœ¨ä¸€ä¸ªç—›ç‚¹ï¼Œæ¯å½“æˆ‘ä»¬åšäº†ä¸€äº›ä¿®æ”¹åéƒ½ä¸å¾—ä¸æ‰‹åŠ¨åœ°é‡æ–°æ„å»ºã€‚å› æ­¤åœ¨ä¸‹ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬è®©Rollupç›‘å¬æ–‡ä»¶çš„å˜åŒ–ï¼Œæ¯å½“æœ‰æ–‡ä»¶æ”¹å˜æ—¶å°±è®©æµè§ˆå™¨è‡ªåŠ¨é‡æ–°è½½å…¥æ–‡ä»¶ã€‚</p>
<h2 id="Part-III-å¦‚ä½•åœ¨ä¸‹ä¸€ä»£åº”ç”¨ä¸­ä½¿ç”¨Rollup-jsï¼šå®æ—¶åŠ è½½"><a href="#Part-III-å¦‚ä½•åœ¨ä¸‹ä¸€ä»£åº”ç”¨ä¸­ä½¿ç”¨Rollup-jsï¼šå®æ—¶åŠ è½½" class="headerlink" title="Part III: å¦‚ä½•åœ¨ä¸‹ä¸€ä»£åº”ç”¨ä¸­ä½¿ç”¨Rollup.jsï¼šå®æ—¶åŠ è½½"></a>Part III: å¦‚ä½•åœ¨ä¸‹ä¸€ä»£åº”ç”¨ä¸­ä½¿ç”¨Rollup.jsï¼šå®æ—¶åŠ è½½</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„é¡¹ç›®å·²ç»å¯ä»¥æ‰“åŒ…JavaScriptå’Œæ ·å¼æ–‡ä»¶äº†ï¼Œä½†ä»ç„¶æ˜¯ä¸€ä¸ªæ‰‹åŠ¨çš„è¿‡ç¨‹ã€‚è€Œä¸”ç”±äºè¿‡ç¨‹çš„æ¯ä¸ªæ­¥éª¤éƒ½æ˜¯æ‰‹åŠ¨çš„ï¼Œç›¸æ¯”è‡ªåŠ¨åŒ–æµç¨‹å¤±è´¥é£é™©æ›´é«˜ - å› ä¸ºæ¯æ¬¡ä¿®æ”¹æ–‡ä»¶åéƒ½æ‰§è¡Œ<code>./node_modules/.bin/rollup -c</code>å¤ªç—›è‹¦äº† - æˆ‘ä»¬å¸Œæœ›è‡ªåŠ¨é‡æ–°æ„å»ºbundleã€‚</p>
<blockquote>
<p>NOTE: å¦‚æœä½ æ²¡æœ‰é¡¹ç›®çš„å‰¯æœ¬ï¼Œä½ å¯ä»¥é€šè¿‡è¿™æ¡å‘½ä»¤å…‹éš†åœ¨Part IIç»“æŸè¿™ä¸ªçŠ¶æ€ä¸‹çš„é¡¹ç›®ï¼š: <code>git clone -b part-3-starter --single-branch https://github.com/jlengstorf/learn-rollup.git</code></p>
</blockquote>
<h4 id="STEP-0-ä¸ºRollupæ·»åŠ ç›‘å¬æ’ä»¶ã€‚"><a href="#STEP-0-ä¸ºRollupæ·»åŠ ç›‘å¬æ’ä»¶ã€‚" class="headerlink" title="STEP 0: ä¸ºRollupæ·»åŠ ç›‘å¬æ’ä»¶ã€‚"></a>STEP 0: ä¸ºRollupæ·»åŠ ç›‘å¬æ’ä»¶ã€‚</h4><p>åŸºäºNode.jsçš„ç›‘å¬å™¨æ˜¯å¾ˆå¸¸è§çš„å¼€å‘å·¥å…·ã€‚å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡webpackï¼ŒGruntï¼ŒGulpæˆ–è€…å…¶ä»–æ„å»ºå·¥å…·ä¼šå¾ˆç†Ÿæ‚‰ã€‚</p>
<p>ç›‘å¬å™¨æ˜¯åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­è¿è¡Œçš„è¿›ç¨‹ï¼Œå½“ä½ ä¿®æ”¹äº†å®ƒç›‘å¬çš„æ–‡ä»¶å¤¹å†…çš„ä»»æ„æ–‡ä»¶æ—¶å°±ä¼šè§¦å‘ä¸€ä¸ªåŠ¨ä½œã€‚å¯¹äºæ„å»ºå·¥å…·è€Œè¨€ï¼Œé€šå¸¸è¿™ä¸ªåŠ¨ä½œæ˜¯è§¦å‘é‡æ–°æ„å»ºã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç›‘å¬<code>src</code>ç›®å½•ä¸‹çš„ä»»ä½•æ–‡ä»¶ï¼Œå¹¶ä¸”æ¢æµ‹åˆ°æ–‡ä»¶å˜åŒ–åå¸Œæœ›Rollupé‡æ–°æ‰“åŒ…ã€‚</p>
<p>ä¸ºäº†è¾¾åˆ°ç›®çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/rollup/rollup-watch"><code>rollup-watch</code></a>æ’ä»¶ï¼Œå®ƒå’Œå‰é¢çš„å…¶å®ƒRollupæ’ä»¶æœ‰äº›ä¸åŒ - but more on that in a bitã€‚è®©æˆ‘ä»¬å…ˆå®‰è£…æ’ä»¶ï¼š</p>
<pre><code>npm install --save-dev rollup-watch
</code></pre><h4 id="STEP-1-ä¼ å…¥-watchæ ‡è¯†è¿è¡ŒRollupã€‚"><a href="#STEP-1-ä¼ å…¥-watchæ ‡è¯†è¿è¡ŒRollupã€‚" class="headerlink" title="STEP 1: ä¼ å…¥--watchæ ‡è¯†è¿è¡ŒRollupã€‚"></a>STEP 1: ä¼ å…¥<code>--watch</code>æ ‡è¯†è¿è¡ŒRollupã€‚</h4><p><code>rollup-watch</code>ä¸å…¶ä»–æ’ä»¶çš„ä¸åŒå°±æ˜¯ä½¿ç”¨è¿™ä¸ªæ’ä»¶ä¸éœ€è¦å¯¹<code>rollup.config.js</code>åšä»»ä½•ä¿®æ”¹ã€‚</p>
<p>å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œåœ¨ç»ˆç«¯å‘½ä»¤ä¸­æ·»åŠ ä¸€ä¸ªæ ‡è¯†ï¼š</p>
<pre><code># Run Rollup with the watch plugin enabled
./node_modules/.bin/rollup -c --watch
</code></pre><p>è¿è¡Œå®Œåï¼Œå¯ä»¥å‘ç°æ§åˆ¶å°çš„è¾“å‡ºå’Œä¹‹å‰æœ‰ç‚¹ä¸åŒï¼š</p>
<pre><code>$ ./node_modules/.bin/rollup -c --watch
checking rollup-watch version...
bundling...
bundled in 949ms. Watching for changes...
</code></pre><p>è¿™ä¸ªè¿›ç¨‹ä¾ç„¶ä¿æŒæ´»åŠ¨çŠ¶æ€ï¼Œæ­£åœ¨ç›‘å¬å˜åŒ–ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åœ¨<code>src/main.js</code>åšç‚¹å°å˜åŒ– - æ¯”å¦‚åŠ ä¸€æ¡æ³¨é‡Š - åœ¨æˆ‘ä»¬ä¿å­˜ä¿®æ”¹çš„é‚£ä¸€åˆ»æ–°çš„bundleæ–‡ä»¶å°±ç”Ÿæˆäº†ã€‚</p>
<blockquote>
<p>ç›‘å¬ç¨‹åºæ‰§è¡Œæ—¶ï¼Œå˜åŒ–ä¼šè§¦å‘é‡æ–°æ„å»ºã€‚LINTERä¼šç«‹åˆ»æ•è·é”™è¯¯ã€‚å¾ˆä¼˜é›…ï¼Œä¸æ˜¯å—ï¼Ÿ</p>
</blockquote>
<p>è¿™ä¸ºæˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­èŠ‚çœäº†å¤§é‡æ—¶é—´ï¼Œä¸è¿‡è¿˜å¯ä»¥æ›´è¿›ä¸€æ­¥ã€‚ç°åœ¨æˆ‘ä»¬ä»ç„¶éœ€è¦æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨æ¥è·å–æ›´æ–°åçš„bundle - æ·»åŠ ä¸€ä¸ªå·¥å…·ï¼Œåœ¨bundleæ›´æ–°åè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚</p>
<blockquote>
<p>TIP: åœ¨ç»ˆç«¯çª—å£è¾“å…¥<code>control + C</code>ç»“æŸç›‘å¬è¿›ç¨‹ã€‚</p>
</blockquote>
<h4 id="STEP-2-å®‰è£…Liveloadè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚"><a href="#STEP-2-å®‰è£…Liveloadè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚" class="headerlink" title="STEP 2: å®‰è£…Liveloadè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚"></a>STEP 2: å®‰è£…Liveloadè‡ªåŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚</h4><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/livereload">LiveReload</a>æ˜¯åŠ é€Ÿå¼€å‘çš„å¸¸ç”¨å·¥å…·ã€‚å®ƒæ˜¯ä¸€ä¸ªè·‘åœ¨åå°çš„è¿›ç¨‹ï¼Œæ¯å½“æœ‰å®ƒç›‘å¬çš„æ–‡ä»¶å˜åŒ–æ—¶ï¼Œä»–å°±ä¼šé€šçŸ¥æµè§ˆå™¨åˆ·æ–°ã€‚</p>
<p>å…ˆä¸‹è½½æ’ä»¶ï¼š</p>
<pre><code>npm install --save-dev livereload
</code></pre><h4 id="STEP-3-æ³¨å…¥livereloadè„šæœ¬ã€‚"><a href="#STEP-3-æ³¨å…¥livereloadè„šæœ¬ã€‚" class="headerlink" title="STEP 3: æ³¨å…¥livereloadè„šæœ¬ã€‚"></a>STEP 3: æ³¨å…¥livereloadè„šæœ¬ã€‚</h4><p>In <code>src/main.js</code>, add the following:</p>
<p>åœ¨LiveReloadå·¥ä½œå‰ï¼Œéœ€è¦å‘é¡µé¢ä¸­æ³¨å…¥ä¸€æ®µè„šæœ¬ç”¨äºå’ŒLiveReloadçš„æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚</p>
<p>ä¸è¿‡åªæœ‰å¼€å‘ç¯å¢ƒä¸‹æœ‰è¿™ä¸ªéœ€æ±‚ï¼Œåˆ©ç”¨ç¯å¢ƒå˜é‡çš„èƒ½åŠ›åˆ¤æ–­åªæœ‰åœ¨éç”Ÿäº§ç¯å¢ƒä¸‹æ‰æ³¨å…¥è„šæœ¬ã€‚</p>
<p>åœ¨<code>src/main.js</code>ä¸­æ·»åŠ ä¸‹é¢ä»£ç ï¼š</p>
<pre><code>  // Import styles (automatically injected into &lt;head&gt;).
  import &apos;../styles/main.css&apos;;

  // Import a couple modules for testing.
  import &#123; sayHelloTo &#125; from &apos;./modules/mod1&apos;;
  import addArray from &apos;./modules/mod2&apos;;

  // Import a logger for easier debugging.
  import debug from &apos;debug&apos;;
  const log = debug(&apos;app:log&apos;);

  // The logger should only be disabled if weâ€™re not in production.
  if (ENV !== &apos;production&apos;) &#123;

    // Enable the logger.
    debug.enable(&apos;*&apos;);
    log(&apos;Logging is enabled!&apos;);

+   // Enable LiveReload
+   document.write(
+     &apos;&lt;script src=&quot;http://&apos; + (location.host || &apos;localhost&apos;).split(&apos;:&apos;)[0] +
+     &apos;:35729/livereload.js?snipver=1&quot;&gt;&lt;/&apos; + &apos;script&gt;&apos;
+   );
  &#125; else &#123;
    debug.disable();
  &#125;

  // Run some functions from our imported modules.
  const result1 = sayHelloTo(&apos;Jason&apos;);
  const result2 = addArray([1, 2, 3, 4]);

  // Print the results on the page.
  const printTarget = document.getElementsByClassName(&apos;debug__output&apos;)[0];

  printTarget.innerText = `sayHelloTo(&apos;Jason&apos;) =&gt; $&#123;result1&#125;\n\n`;
  printTarget.innerText += `addArray([1, 2, 3, 4]) =&gt; $&#123;result2&#125;`;
</code></pre><p>åšä¸€äº›ä¿®æ”¹ç„¶åä¿å­˜ï¼Œç°åœ¨æˆ‘ä»¬è¯•è¯•çœ‹ã€‚</p>
<blockquote>
<p>NOTE: Livereloadæ˜¯å¦‚ä½•å·¥ä½œçš„å¹¶ä¸é‡è¦ï¼Œç®€å•çš„è§£é‡Šå°±æ˜¯å‘½ä»¤è¡Œè¿›ç¨‹ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œç„¶åé€šè¿‡websocketså‘å®¢æˆ·ç«¯è„šæœ¬å‘é€æ¶ˆæ¯è§¦å‘é‡åŠ è½½ã€‚</p>
</blockquote>
<h4 id="STEP-4-è¿è¡ŒLivereloadã€‚"><a href="#STEP-4-è¿è¡ŒLivereloadã€‚" class="headerlink" title="STEP 4: è¿è¡ŒLivereloadã€‚"></a>STEP 4: è¿è¡ŒLivereloadã€‚</h4><p>LiveReloadå®‰è£…å¥½å¹¶ä¸”è„šæœ¬æ³¨å…¥åˆ°æ–‡æ¡£ä¸­åï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œå®ƒå»ç›‘å¬<code>build</code>ç›®å½•ï¼š</p>
<pre><code>./node_modules/.bin/livereload &apos;build/&apos;
</code></pre><blockquote>
<p>NOTE: ç›‘å¬<code>build/</code>æ˜¯å› ä¸ºæˆ‘ä»¬åªéœ€è¦åœ¨æ–°çš„bundleäº§ç”Ÿæ—¶æ‰é‡æ–°æ„å»ºã€‚</p>
</blockquote>
<p>è¾“å‡ºç»“æœåƒä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code>$ ./node_modules/.bin/livereload &apos;build/&apos;
Starting LiveReload v0.5.0 for /Users/jlengstorf/dev/code.lengstorf.com/projects/learn-rollup/build on port 35729.
</code></pre><p>å¦‚æœæˆ‘ä»¬ç”¨æµè§ˆå™¨æ‰“å¼€<code>build/index.html</code> - åŠ¡å¿…åœ¨å¼€å¯LiveReloadåå†åˆ·æ–°é¡µé¢ï¼Œç¡®ä¿socketè¿æ¥å¤„äºæ¿€æ´»çŠ¶æ€ - å¯ä»¥å‘ç°<code>build/index.html</code>çš„å˜åŒ–ä¼šè®©æµè§ˆå™¨è‡ªåŠ¨é‡æ–°åŠ è½½ï¼š</p>
<blockquote>
<p>æ–‡ä»¶å˜åŒ–è§¦å‘æµè§ˆå™¨é‡æ–°åŠ è½½ã€‚</p>
</blockquote>
<p>éå¸¸æ£’ï¼Œä½†ä»ç„¶ä¸å®Œç¾ï¼šç°åœ¨æˆ‘ä»¬åªèƒ½è¿è¡ŒRollupçš„ç›‘å¬å‡½æ•°æˆ–è€…LiveReloadï¼Œé™¤éæˆ‘ä»¬æ‰“å¼€å¤šä¸ªç»ˆç«¯ä¼šè¯ã€‚è¿™å¯ä¸ç†æƒ³ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šé€‰æ‹©ä¸€ä¸ªè§£å†³åŠæ³•ã€‚</p>
<p>STEP 5: ä½¿ç”¨<code>package.json</code>è„šæœ¬ç®€åŒ–å¯åŠ¨è¿‡ç¨‹ã€‚</p>
<p>æ•™ç¨‹è‡³ä»Šï¼Œæˆ‘ä»¬éƒ½ä¸å¾—ä¸è¾“å…¥<code>rollup</code>è„šæœ¬çš„å…¨è·¯å¾„ï¼Œæˆ‘çŒœä½ å·²ç»æ„Ÿè§‰åˆ°è¿™å¾ˆè ¢äº†ã€‚</p>
<p>å› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªèƒ½åŒæ—¶è¿è¡Œç›‘å¬ä»»åŠ¡å’Œ<code>Livereload</code>çš„å·¥å…·ï¼Œå…ˆå°†è¿™ä¸¤ä¸ª<code>rollup</code>å‘½ä»¤å’ŒLiveReloadå‘½ä»¤å½“åšè„šæœ¬å†™åœ¨<code>package.json</code>ä¸­ã€‚</p>
<p>æ‰“å¼€<code>package.json</code> - å®ƒä½äºé¡¹ç›®æ ¹ç›®å½•ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œèƒ½çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code>&#123;
  &quot;name&quot;: &quot;learn-rollup&quot;,
  &quot;version&quot;: &quot;0.0.0&quot;,
  &quot;description&quot;: &quot;This is an example project to accompany a tutorial on using Rollup.&quot;,
  &quot;main&quot;: &quot;build/js/main.min.js&quot;,
  &quot;scripts&quot;: &#123;
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  &#125;,
  &quot;repository&quot;: &#123;
    &quot;type&quot;: &quot;git&quot;,
    &quot;url&quot;: &quot;git+ssh://git@github.com/jlengstorf/learn-rollup.git&quot;
  &#125;,
  &quot;author&quot;: &quot;Jason Lengstorf &lt;jason@lengstorf.com&gt; (@jlengstorf)&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;bugs&quot;: &#123;
    &quot;url&quot;: &quot;https://github.com/jlengstorf/learn-rollup/issues&quot;
  &#125;,
  &quot;homepage&quot;: &quot;https://github.com/jlengstorf/learn-rollup#readme&quot;,
  &quot;devDependencies&quot;: &#123;
    &quot;babel-preset-es2015-rollup&quot;: &quot;^1.2.0&quot;,
    &quot;cssnano&quot;: &quot;^3.7.4&quot;,
    &quot;livereload&quot;: &quot;^0.5.0&quot;,
    &quot;npm-run-all&quot;: &quot;^3.0.0&quot;,
    &quot;postcss-cssnext&quot;: &quot;^2.7.0&quot;,
    &quot;postcss-nested&quot;: &quot;^1.0.0&quot;,
    &quot;postcss-simple-vars&quot;: &quot;^3.0.0&quot;,
    &quot;rollup&quot;: &quot;^0.34.9&quot;,
    &quot;rollup-plugin-babel&quot;: &quot;^2.6.1&quot;,
    &quot;rollup-plugin-commonjs&quot;: &quot;^3.3.1&quot;,
    &quot;rollup-plugin-eslint&quot;: &quot;^2.0.2&quot;,
    &quot;rollup-plugin-node-resolve&quot;: &quot;^2.0.0&quot;,
    &quot;rollup-plugin-postcss&quot;: &quot;^0.1.1&quot;,
    &quot;rollup-plugin-replace&quot;: &quot;^1.1.1&quot;,
    &quot;rollup-plugin-uglify&quot;: &quot;^1.0.1&quot;,
    &quot;rollup-watch&quot;: &quot;^2.5.0&quot;
  &#125;,
  &quot;dependencies&quot;: &#123;
    &quot;debug&quot;: &quot;^2.2.0&quot;
  &#125;
&#125;
</code></pre><p>çœ‹åˆ°<code>scripts</code>å±æ€§äº†å—ï¼Ÿæˆ‘ä»¬å°†ä¸ºå®ƒå¢åŠ ä¸¤ä¸ªæ–°å±æ€§ï¼š</p>
<ul>
<li><p>ä¸€ä¸ªè¿è¡ŒRollupæ‰“åŒ…çš„è„šæœ¬(åŸå…ˆæ‰‹åŠ¨æ‰§è¡Œçš„<code>./node_modules/.bin/rollup -c --watch</code>)</p>
</li>
<li><p>ä¸€ä¸ªå¯åŠ¨LiveReloadçš„è„šæœ¬(åŸå…ˆæ‰‹åŠ¨æ‰§è¡Œçš„<code>./node_modules/.bin/livereload &#39;build/&#39;</code>)</p>
</li>
</ul>
<p>åœ¨<code>package.json</code>åŠ ä¸Šä¸‹é¢çš„å†…å®¹ï¼š</p>
<pre><code>  &#123;
&quot;name&quot;: &quot;learn-rollup&quot;,
&quot;version&quot;: &quot;0.0.0&quot;,
&quot;description&quot;: &quot;This is an example project to accompany a tutorial on using Rollup.&quot;,
&quot;main&quot;: &quot;build/js/main.min.js&quot;,
&quot;scripts&quot;: &#123;
+     &quot;dev&quot;: &quot;rollup -c --watch&quot;,
+     &quot;reload&quot;: &quot;livereload &apos;build/&apos;&quot;,
      &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
    &#125;,
    &quot;repository&quot;: &#123;
      &quot;type&quot;: &quot;git&quot;,
      &quot;url&quot;: &quot;git+ssh://git@github.com/jlengstorf/learn-rollup.git&quot;
    &#125;,
    &quot;author&quot;: &quot;Jason Lengstorf &lt;jason@lengstorf.com&gt; (@jlengstorf)&quot;,
    &quot;license&quot;: &quot;ISC&quot;,
    &quot;bugs&quot;: &#123;
      &quot;url&quot;: &quot;https://github.com/jlengstorf/learn-rollup/issues&quot;
    &#125;,
    &quot;homepage&quot;: &quot;https://github.com/jlengstorf/learn-rollup#readme&quot;,
    &quot;devDependencies&quot;: &#123;
      &quot;babel-preset-es2015-rollup&quot;: &quot;^1.2.0&quot;,
      &quot;cssnano&quot;: &quot;^3.7.4&quot;,
      &quot;livereload&quot;: &quot;^0.5.0&quot;,
      &quot;npm-run-all&quot;: &quot;^3.0.0&quot;,
      &quot;postcss-cssnext&quot;: &quot;^2.7.0&quot;,
      &quot;postcss-nested&quot;: &quot;^1.0.0&quot;,
      &quot;postcss-simple-vars&quot;: &quot;^3.0.0&quot;,
      &quot;rollup&quot;: &quot;^0.34.9&quot;,
      &quot;rollup-plugin-babel&quot;: &quot;^2.6.1&quot;,
      &quot;rollup-plugin-commonjs&quot;: &quot;^3.3.1&quot;,
      &quot;rollup-plugin-eslint&quot;: &quot;^2.0.2&quot;,
      &quot;rollup-plugin-node-resolve&quot;: &quot;^2.0.0&quot;,
      &quot;rollup-plugin-postcss&quot;: &quot;^0.1.1&quot;,
      &quot;rollup-plugin-replace&quot;: &quot;^1.1.1&quot;,
      &quot;rollup-plugin-uglify&quot;: &quot;^1.0.1&quot;,
      &quot;rollup-watch&quot;: &quot;^2.5.0&quot;
    &#125;,
    &quot;dependencies&quot;: &#123;
      &quot;debug&quot;: &quot;^2.2.0&quot;
    &#125;
  &#125;
</code></pre><p>è¿™äº›è„šæœ¬è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç®€ç§°æ¥æ‰§è¡Œé€‰æ‹©çš„è„šæœ¬ã€‚</p>
<p>ä½¿ç”¨<code>npm run dev</code>è¿è¡ŒRollupã€‚</p>
<p>ä½¿ç”¨<code>npm run reload</code>æ‰§è¡ŒLiveReloadã€‚</p>
<p>æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯è®©ä»–ä»¬ä¸€èµ·è¿è¡Œã€‚</p>
<h4 id="STEP-6-å®‰è£…åŒæ—¶è¿è¡Œwatcherå’ŒLivereloadçš„å·¥å…·ã€‚"><a href="#STEP-6-å®‰è£…åŒæ—¶è¿è¡Œwatcherå’ŒLivereloadçš„å·¥å…·ã€‚" class="headerlink" title="STEP 6: å®‰è£…åŒæ—¶è¿è¡Œwatcherå’ŒLivereloadçš„å·¥å…·ã€‚"></a>STEP 6: å®‰è£…åŒæ—¶è¿è¡Œwatcherå’ŒLivereloadçš„å·¥å…·ã€‚</h4><p>ä¸ºäº†èƒ½åŒæ—¶æ‰§è¡ŒRollupå’ŒLiveReloadï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ä¸€ä¸ªå«åš<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/npm-run-all"><code>npm-run-all</code></a>çš„å·¥å…·ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œæˆ‘ä»¬å…ˆä¸è®¨è®ºä»–çš„å…¨éƒ¨åŠŸèƒ½ã€‚æˆ‘ä»¬ç°åœ¨åªä½¿ç”¨å®ƒå¹¶è¡Œæ‰§è¡Œè„šæœ¬çš„èƒ½åŠ› - æ„å‘³ç€åŒä¸€ä¸ªç»ˆç«¯ä¼šè¯å¯ä»¥åŒæ—¶æ‰§è¡Œä¸¤ä¸ªä»»åŠ¡ã€‚</p>
<p>å…ˆå®‰è£…<code>npm-run-all</code>:</p>
<pre><code>npm install --save-dev npm-run-all
</code></pre><p>ç„¶åæˆ‘ä»¬è¦åœ¨<code>package.json</code>ä¸­å†åŠ å…¥ä¸€æ¡è°ƒç”¨<code>npm-run-all</code>çš„è„šæœ¬ã€‚åœ¨<code>scripts</code>ä»£ç å—å†…ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹(ç®€å•èµ·è§æˆ‘çœç•¥äº†æ–‡ä»¶çš„å¤§éƒ¨åˆ†å†…å®¹)ï¼š</p>
<pre><code>    &quot;scripts&quot;: &#123;
      &quot;dev&quot;: &quot;rollup -c --watch&quot;,
      &quot;reload&quot;: &quot;livereload &apos;build/&apos; -d&quot;,
+     &quot;watch&quot;: &quot;npm-run-all --parallel reload dev&quot;,
      &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
    &#125;
</code></pre><p>ä¿å­˜ä¿®æ”¹ï¼Œåˆ‡æ¢åˆ°ç»ˆç«¯ã€‚å‡†å¤‡å¥½æœ€åä¸€æ­¥ï¼</p>
<h4 id="STEP-7-æ‰§è¡Œæœ€åçš„watchè„šæœ¬ã€‚"><a href="#STEP-7-æ‰§è¡Œæœ€åçš„watchè„šæœ¬ã€‚" class="headerlink" title="STEP 7: æ‰§è¡Œæœ€åçš„watchè„šæœ¬ã€‚"></a>STEP 7: æ‰§è¡Œæœ€åçš„<code>watch</code>è„šæœ¬ã€‚</h4><p>å°±åƒä¹‹å‰åšçš„ä¸€æ ·ã€‚</p>
<p>åœ¨ç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<pre><code>npm run watch
</code></pre><p>ç„¶ååˆ·æ–°æµè§ˆå™¨, æ”¹å˜ä¸€ä¸‹JSæˆ–CSS, æµè§ˆå™¨ä¼šåŠ è½½æ›´æ–°åçš„bundleå¹¶è‡ªåŠ¨åˆ·æ–° - å¤ªå¥‡å¦™äº†ï¼</p>
<blockquote>
<p>Liveload + è‡ªåŠ¨æ„å»ºå¦‚åŒé­”æ³•ä¸€èˆ¬ã€‚</p>
</blockquote>
<p>ç°åœ¨æˆ‘ä»¬æ˜¯Rollupä¸“å®¶äº†ã€‚æˆ‘ä»¬çš„æ‰“åŒ…ä»£ç å˜å¾—æ›´å°æ›´å¿«ï¼Œå¼€å‘æµç¨‹ä¹Ÿæ›´è½»æ¾å¿«é€Ÿã€‚</p>
<h2 id="Further-Reading"><a href="#Further-Reading" class="headerlink" title="Further Reading"></a>Further Reading</h2><h2 id="æ‹“å±•é˜…è¯»"><a href="#æ‹“å±•é˜…è¯»" class="headerlink" title="æ‹“å±•é˜…è¯»"></a>æ‹“å±•é˜…è¯»</h2><p><a target="_blank" rel="noopener" href="http://postcss.org/">PostCSS</a></p>
<p><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/26882177/react-js-inline-style-best-practices">Some discussion about using JS to insert styles, and when/whether itâ€™s appropriate</a></p>
<p>è¿™ç¯‡æ–‡ç« çš„ä»£ç æ”¾åœ¨GitHubä¸Šã€‚ä½ å¯ä»¥<a target="_blank" rel="noopener" href="https://github.com/jlengstorf/learn-rollup">fork è¿™ä¸ªä»“åº“</a>è¿›è¡Œä¿®æ”¹æˆ–æµ‹è¯•ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/jlengstorf/learn-rollup/issues">å¼€issue</a>æˆ–è€…æŠ¥å‘Šbugï¼Œæˆ–è€…<a target="_blank" rel="noopener" href="https://github.com/jlengstorf/learn-rollup/compare">æ–°å»ºpull request</a>è¿›è¡Œå»ºè®®æˆ–è€…ä¿®æ”¹ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://code.lengstorf.com/learn-rollup-css/">åŸæ–‡é“¾æ¥</a></p>

    </section>
    
        <section id="comments">
        
        </section>
    
</article>

    </div>
    <button class="feedback-btn" data-feedbackok-trigger>Hello~ ğŸ¥°</button>
    <footer>
    <div class="info"><span>Powered By <a href="https://hexo.io/" target="blank">Hexo</a></span>&nbsp;&nbsp;&nbsp;&nbsp;<span>Theme by <a href="https://github.com/showonne/hexo_showonne" target="blank">Showonne</a></span></div>
</footer>
    <script
        src="https://cdn.feedbackok.com/widget.js"
        data-pid="0m524p3"
        async
        defer
    ></script>
    
<script src="/js/index.js"></script>

</body>
</html>
