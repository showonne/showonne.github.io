<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <title>showonne</title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/tomorrow-night.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
<meta name="generator" content="Hexo 5.4.2"></head>
<body>
    <header>
    <span class="banner"><a href="/">showonne</a></span>
    <span class="menu">Menu</span>
    <ul class="menu_list hide">
        
            <li><a href="/" >Home</a></li>
        
            <li><a href="/archives" >Archives</a></li>
        
            <li><a href="/tags" >Tags</a></li>
        
            <li><a href="/links" >Links</a></li>
        
            <li><a href="/about" >About</a></li>
        
    </ul>
</header>
    <div class="main">
        
    <article>
    <h1 class='post-title'>
        <span>ä½¿ç”¨Vueå†™ä¸€ä¸ªdatepicker</span>
    </h1>
    <section class='post-content'>
        
            
        
        <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å†™æ’ä»¶æ˜¯å¾ˆæœ‰æ„æ€ï¼Œä¹Ÿå¾ˆé”»ç‚¼äººï¼Œå› ä¸ºè¿™ä¸ªè¿‡ç¨‹ä¸­èƒ½å‘ç°è®¸å¤šçš„ç»†èŠ‚é—®é¢˜ã€‚åœ¨å‰ç«¯å‘å±•çš„è¿‡ç¨‹ä¸­ï¼ŒjQueryæ— ç–‘æ˜¯ä¸€ä¸ªé‡è¦çš„é‡Œç¨‹ç¢‘ï¼Œå›´ç»•ç€è¿™ä¸ªä¼˜ç§€é¡¹ç›®ä¹Ÿå‡ºç°äº†å¾ˆå¤šä¼˜ç§€çš„æ’ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¤§å¤§èŠ‚çœäº†å¼€å‘è€…ä»¬çš„æ—¶é—´ã€‚jQueryæœ€é‡è¦çš„ä½œç”¨æ˜¯è·¨æµè§ˆå™¨ï¼Œè€Œç°åœ¨æµè§ˆå™¨å¸‚åœºè™½ä¸å®Œç¾ï¼Œä½†å·²è¿œæ²¡æœ‰ä»å‰é‚£ä¹ˆæƒ¨ï¼Œæ•°æ®é©±åŠ¨è§†å›¾çš„æ€æƒ³å€å—æ¬¢è¿ï¼Œå¤§å®¶å¼€å§‹ä½¿ç”¨å‰ç«¯æ¡†æ¶å–ä»£jQueryï¼Œæˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢Vue.jsï¼Œæ‰€ä»¥æƒ³è¯•ç€ç”¨Vue.jså†™ä¸€ä¸ªç»„ä»¶å‡ºæ¥ã€‚</p>
<p>ä¸ºäº†å‘å¸ƒåˆ°npmä¸Šï¼Œæ‰€ä»¥ç»™é¡¹ç›®åœ°å€æ”¹åå­—äº†ï¼Œä½†æ˜¯å†…éƒ¨ä»£ç æ²¡æœ‰æ”¹ï¼Œä½¿ç”¨æ–¹æ³•æ¯”ä¹‹å‰æ–¹ä¾¿ã€‚<br>Demoæ¼”ç¤º: <a target="_blank" rel="noopener" href="http://www.showonne.com/vue-date/dist/browser/">Here</a><br>GitHubåœ°å€: <a target="_blank" rel="noopener" href="https://github.com/showonne/vue-date">Here</a><br><del><b>å¸Œæœ›å¤§å®¶èƒ½ç»™ä¸ªstar</b></del><br><span id="more"></span></p>
<h2 id="åŠŸèƒ½-amp-æœŸæœ›"><a href="#åŠŸèƒ½-amp-æœŸæœ›" class="headerlink" title="åŠŸèƒ½&amp;æœŸæœ›"></a>åŠŸèƒ½&amp;æœŸæœ›</h2><p>è¿™ä¸ªdatepickerç›®å‰ä»…å®ç°äº†ä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>é€‰æ‹©æ—¶é—´(<del>è¿™è¯è¯´å¾—æœ‰ç‚¹å¤šä½™<del>)</li>
<li>æœ€å¤§/æœ€å°æ—¶é—´é™åˆ¶</li>
<li>ä¸­/è‹±æ–‡åˆ‡æ¢(å…¶å®ä¹Ÿå°±æ˜ŸæœŸå’Œæœˆä»½éœ€è¦åˆ‡æ¢)</li>
<li>å¯ä»¥ä»¥<code>.vue</code>å½¢å¼ä½¿ç”¨ï¼Œä¹Ÿå¯åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ç›´æ¥ä½¿ç”¨</li>
<li>æ²¡äº†ã€‚ã€‚ã€‚</li>
</ul>
<h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><p>ä¸‡äº‹çš„ç¬¬ä¸€æ­¥ä¾ç„¶æ˜¯åˆ›å»ºé¡¹ç›®ï¼Œåªæ˜¯å•ä¸€ç»„ä»¶ï¼Œç»“æ„å¹¶ä¸å¤æ‚ï¼ŒDatepicker.vueæ˜¯æœ€é‡è¦çš„ç»„ä»¶æ–‡ä»¶ï¼Œdistæ˜¯webpackçš„è¾“å‡ºæ–‡ä»¶å¤¹ï¼Œindex.jsæ˜¯webpackæ‰“åŒ…çš„å…¥å£æ–‡ä»¶ï¼Œæœ€åæ˜¯webpackçš„é…ç½®æ–‡ä»¶ï¼Œç”¨æ¥å¯¹æˆ‘ä»¬çš„åº“æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ç”¨çš„ã€‚å› æ­¤é¡¹ç›®ç»“æ„å°±æ˜¯è¿™æ ·ï¼š</p>
<pre><code>.
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â”œâ”€â”€ index.js
â”œâ”€â”€ package.json
â”œâ”€â”€ src
â”‚   â””â”€â”€ Datepicker.vue
â””â”€â”€ webpack.config.js
</code></pre><h2 id="ä»Datepicker-vueå…¥æ‰‹"><a href="#ä»Datepicker-vueå…¥æ‰‹" class="headerlink" title="ä»Datepicker.vueå…¥æ‰‹"></a>ä»Datepicker.vueå…¥æ‰‹</h2><p>ä»¥<code>.vue</code>çš„æ–¹å¼å†™Vueç»„ä»¶æ˜¯ä¸€ç§ç‰¹æ®Šå†™æ³•ï¼Œæ¯ä¸ªVueæ–‡ä»¶åŒ…æ‹¬<code>template</code>, <code>script</code>, <code>style</code>ä¸‰éƒ¨åˆ†ï¼Œ<code>template</code>æœ€å¥½ä¸è¦æˆä¸ºç‰‡æ®µå®ä¾‹,æ‰€ä»¥æœ€å¤–å±‚å…ˆå¥—ä¸€å±‚<code>div</code>ï¼Œå½“åšæ•´ä¸ªç»„ä»¶çš„æ ¹å…ƒç´ ã€‚ä¸€ä¸ªdatepickerä¸€èˆ¬ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªç”¨æ¥æ˜¾ç¤ºæ—¥æœŸçš„inputæ¡†ï¼Œä¸€ä¸ªç”¨æ¥é€‰æ‹©æ—¥æœŸçš„panelï¼Œå› ä¸ºæˆ‘å‘ç°inputåœ¨ç§»åŠ¨ç«¯ä¼šè‡ªåŠ¨å”¤èµ·é”®ç›˜ï¼Œæ‰€ä»¥æ²¡æœ‰ä½¿ç”¨inputï¼Œç›´æ¥ç”¨äº†divæ¨¡æ‹Ÿ,é€šè¿‡ç‚¹å‡»äº‹ä»¶å†³å®španelçš„æ˜¾éšã€‚<code>value</code>æ˜¯æœ€ç»ˆçš„ç»“æœï¼Œéœ€è¦å’Œçˆ¶ç»„ä»¶é€šä¿¡ï¼Œæ‰€ä»¥å°†valueå†™æˆäº†propï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨<code>value.sync=&quot;xxx&quot;</code>ï¼Œdatepickerçš„valueå°±å’Œçˆ¶ç»„ä»¶çš„<code>xxx</code>åŒå‘ç»‘å®šäº†ã€‚</p>
<pre><code>&lt;template&gt;
    &lt;div class=&quot;date-picker&quot;&gt;
        &lt;div class=&quot;input&quot; v-text=&quot;value&quot; @click=&quot;panelState = !panelState&quot;&gt;
    &lt;/div&gt;
    &lt;div class=&quot;date-panel&quot; v-show=&quot;panelState&quot;&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;scrip&gt;
    export default &#123;
        data () &#123;
            return &#123;
                panelState: false //åˆå§‹å€¼ï¼Œé»˜è®¤panelå…³é—­
            &#125;
        &#125;,
        props: &#123;
            value: String
        &#125;
    &#125;
&lt;/script&gt;
</code></pre><h2 id="æ¸²æŸ“æ—¥æœŸåˆ—è¡¨"><a href="#æ¸²æŸ“æ—¥æœŸåˆ—è¡¨" class="headerlink" title="æ¸²æŸ“æ—¥æœŸåˆ—è¡¨"></a>æ¸²æŸ“æ—¥æœŸåˆ—è¡¨</h2><p>ä¸€ä¸ªæœˆæœ€å°‘æ˜¯28å¤©ï¼Œå¦‚æœæŠŠå‘¨æ—¥æ’åœ¨å¼€å¤´ï¼Œé‚£ä¹ˆæœ€å°‘(1å·æ°å¥½æ˜¯å‘¨æ—¥)éœ€è¦4è¡Œï¼Œä½†æ˜¯æ¯ä¸ªæœˆå¤©æ•°30ï¼Œ31å±…å¤šï¼Œè€Œä¸”1å·åˆä¸ä¸€å®šæ˜¯å‘¨æ—¥ï¼Œæˆ‘ç´¢æ€§å¹²è„†æŒ‰æœ€å¤šçš„æƒ…å†µè®¾è®¡äº†ï¼Œå…±6è¡Œï¼Œå½“æœˆæ—¥æœŸæ²¡å¡«æ»¡çš„åœ°æ–¹ç”¨ä¸Šä¸ªæœˆæˆ–ä¸‹ä¸ªæœˆçš„æ—¥æœŸè¡¥é½ï¼Œè¿™æ ·å°±æ–¹ä¾¿è®¡ç®—äº†ï¼Œè€Œä¸”åˆ‡æ¢æœˆä»½æ—¶å€™panelé«˜åº¦ä¸ä¼šå˜åŒ–ã€‚æ—¥æœŸåˆ—è¡¨çš„æ•°ç»„éœ€è¦åŠ¨æ€è®¡ç®—ï¼ŒVueæä¾›äº†<a target="_blank" rel="noopener" href="http://vuejs.org.cn/api/#computed">computed</a>è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥ç›´æ¥å°†æ—¥æœŸåˆ—è¡¨<code>dateList</code>å†™æˆè®¡ç®—å±æ€§ã€‚æˆ‘çš„æ–¹æ³•æ˜¯å°†æ—¥æœŸåˆ—è¡¨å›ºå®šä¸ºé•¿åº¦ä¸º42çš„æ•°ç»„ï¼Œç„¶åå°†æœ¬æœˆï¼Œä¸Šä¸ªæœˆï¼Œä¸‹ä¸ªæœˆçš„æ—¥æœŸä¾æ¬¡å¡«å……ã€‚</p>
<pre><code>computed: &#123;
    dateList () &#123;
        //è·å–å½“æœˆçš„å¤©æ•°
        let currentMonthLength = new Date(this.tmpMonth, this.tmpMonth + 1, 0).getDate()
        //å…ˆå°†å½“æœˆçš„æ—¥æœŸå¡å…¥dateList
        let dateList = Array.from(&#123;length: currentMonthLength&#125;, (val, index) =&gt; &#123;
            return &#123;
                currentMonth: true,
                value: index + 1
            &#125;
        &#125;)
        //è·å–å½“æœˆ1å·çš„æ˜ŸæœŸæ˜¯ä¸ºäº†ç¡®å®šåœ¨1å·å‰éœ€è¦æ’å¤šå°‘å¤©
        let startDay = new Date(this.year, this.tmpMonth, 1).getDay()
        //ç¡®è®¤ä¸Šä¸ªæœˆä¸€å…±å¤šå°‘å¤©
        let previousMongthLength = new Date(this.year, this.tmpMonth, 0).getDate()
    &#125;
    //åœ¨1å·å‰æ’å…¥ä¸Šä¸ªæœˆæ—¥æœŸ
    for(let i = 0, len = startDay; i &lt; len; i++)&#123;
        dateList = [&#123;previousMonth: true, value: previousMongthLength - i&#125;].concat(dateList)
    &#125;
    //è¡¥å…¨å‰©ä½™ä½ç½®
    for(let i = 0, item = 1; i &lt; 42; i++, item++)&#123;
        dateList[dateList.length] = &#123;nextMonth: true, value: i&#125;
    &#125;
    return dateList
&#125;
</code></pre><p>è¿™é‡Œç”¨<code>Array.from</code>æ¥åˆå§‹åŒ–äº†ä¸€ä¸ªæ•°ç»„ï¼Œä¼ å…¥ä¸€ä¸ªArray Likeï¼Œè½¬åŒ–æˆæ•°ç»„ï¼Œåœ¨æ‹¼æ¥å­—ç¬¦ä¸²æ—¶å€™é‡‡ç”¨äº†<code>arr[arr.length]</code>å’Œ<code>[&#123;&#125;].concat(arr)</code>è¿™ç§æ–¹å¼ï¼Œå› ä¸ºåœ¨JsTipsä¸Šå­¦åˆ°è¿™æ ·åšæ€§èƒ½æ›´å¥½ï¼Œæ–‡ç« çš„æœ€åä¼šè´´å‡ºç›¸å…³é“¾æ¥ã€‚<br>è¿™æ ·ï¼Œæ—¥æœŸåˆ—è¡¨å°±æ„å»ºå¥½äº†ï¼Œåœ¨templateä¸­ä½¿ç”¨<code>v-for</code>å¾ªç¯æ¸²æŸ“å‡ºæ¥</p>
<pre><code>&lt;ul class=&quot;date-list&quot;&gt;
    &lt;li v-for=&quot;item in dateList&quot;
        v-text=&quot;item.value&quot; 
        :class=&quot;&#123;preMonth: item.previousMonth, nextMonth: item.nextMonth,
            selected: date === item.value &amp;&amp; month === tmpMonth &amp;&amp; item.currentMonth, invalid: validateDate(item)&#125;&quot;
        @click=&quot;selectDate(item)&quot;&gt;
    &lt;/li&gt;
&lt;/ul&gt;
</code></pre><p>æ ·å¼ä¸Šå°±å¯ä»¥è‡ªå·±å‘æŒ¥äº†ï¼Œæ€ä¹ˆå–œæ¬¢æ€ä¹ˆå†™ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¾ªç¯æ—¥æœŸå¯èƒ½ä¼šå‡ºç°ä¸Šä¸ªæœˆæˆ–è¿™ä¸ªæœˆçš„æ—¥æœŸï¼Œæˆ‘é€šè¿‡<code>previuosMonth</code>,<code>currentMonth</code>å’Œ<code>nextMonth</code>åˆ†åˆ«åšäº†æ ‡è®°ï¼Œå¯¹å…¶ä»–åŠŸèƒ½æä¾›åˆ¤æ–­æ¡ä»¶ã€‚<br>å¹´ä»½å’Œæœˆä»½çš„åˆ—è¡¨éƒ½æ˜¯å·®ä¸å¤šçš„é“ç†ï¼Œå¹´ä»½åˆ—è¡¨çš„åˆå§‹å€¼æˆ‘ç›´æ¥å†™åœ¨äº†<code>data</code>é‡Œï¼Œä»¥å½“å‰å¹´ä»½ä¸ºç¬¬ä¸€ä¸ªï¼Œä¸ºäº†å’Œæœˆä»½ä¿æŒä¸€è‡´ï¼Œæ¯æ¬¡æ˜¾ç¤º12ä¸ªï¼Œéƒ½é€šè¿‡<code>v-for</code>æ¸²æŸ“ã€‚</p>
<pre><code>data () &#123;
    return &#123;
        yearList: Array.from(&#123;length: 12&#125;, (value, index) =&gt; new Date().getFullYear() + index)
    &#125;
&#125;
</code></pre><h2 id="é€‰æ‹©æ—¥æœŸåŠŸèƒ½"><a href="#é€‰æ‹©æ—¥æœŸåŠŸèƒ½" class="headerlink" title="é€‰æ‹©æ—¥æœŸåŠŸèƒ½"></a>é€‰æ‹©æ—¥æœŸåŠŸèƒ½</h2><p>é€‰æ‹©é¡ºåºæ˜¯ï¼šå¹´ -&gt; æœˆ -&gt; æ—¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªçŠ¶æ€å˜é‡æ¥æ§åˆ¶panelä¸­æ˜¾ç¤ºçš„å†…å®¹ï¼Œç»‘å®šé€‚åˆçš„å‡½æ•°åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€ã€‚</p>
<pre><code>&lt;div&gt;
    &lt;div class=&quot;type-year&quot; v-show=&quot;panelType === &apos;year&apos;&quot;&gt;
        &lt;ul class=&quot;year-list&quot;&gt;
          &lt;li v-for=&quot;item in yearList&quot;
              v-text=&quot;item&quot;
              :class=&quot;&#123;selected: item === tmpYear, invalid: validateYear(item)&#125;&quot; 
              @click=&quot;selectYear(item)&quot;
          &gt;
          &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
    &lt;div class=&quot;type-month&quot; v-show=&quot;panelType === &apos;month&apos;&quot;&gt;
        &lt;ul class=&quot;month-list&quot;&gt;
          &lt;li v-for=&quot;item in monthList&quot;
              v-text=&quot;item | month language&quot;
              :class=&quot;&#123;selected: $index === tmpMonth &amp;&amp; year === tmpYear, invalid: validateMonth($index)&#125;&quot; 
              @click=&quot;selectMonth($index)&quot;
          &gt;
          &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
    &lt;div class=&quot;type-date&quot; v-show=&quot;panelType === &apos;date&apos;&quot;&gt;
        &lt;ul class=&quot;date-list&quot;&gt;
          &lt;li v-for=&quot;item in dateList&quot;
              v-text=&quot;item.value&quot; 
              track-by=&quot;$index&quot; 
              :class=&quot;&#123;preMonth: item.previousMonth, nextMonth: item.nextMonth,
                  selected: date === item.value &amp;&amp; month === tmpMonth &amp;&amp; item.currentMonth, invalid: validateDate(item)&#125;&quot;
              @click=&quot;selectDate(item)&quot;&gt;
          &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre><p>é€‰æ‹©æ—¥æœŸçš„æ–¹æ³•å°±ä¸ç»†è¯´äº†ï¼Œåœ¨<code>selectYear</code>,<code>selectMonth</code>ä¸­å¯¹å¹´ä»½ï¼Œæœˆä»½å˜é‡èµ‹å€¼ï¼Œå†åˆ†åˆ«å°†<code>panelType</code>æ¨å‘ä¸‹ä¸€æ­¥å°±å®ç°äº†æ—¥æœŸé€‰æ‹©åŠŸèƒ½ã€‚<br>ä¸è¿‡åœ¨æœªé€‰æ‹©å®Œæ—¥æœŸä¹‹å‰ï¼Œä½ å¯èƒ½ä¸å¸Œæœ›å½“å‰å¹´æœˆçš„çœŸå®å€¼å‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥åœ¨è¿™äº›æ–¹æ³•ä¸­å¯å…ˆå°†é€‰æ‹©çš„å€¼èµ‹ç»™ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œç­‰åˆ°<code>seletDate</code>çš„æ—¶å€™å†ä¸€æ¬¡æ€§å…¨éƒ¨èµ‹å€¼ã€‚</p>
<pre><code>selectMonth (month) &#123;
    if(this.validateMonth(month))&#123;
        return
    &#125;else&#123;
        //ä¸´æ—¶å˜é‡
        this.tmpMonth = month
        //åˆ‡æ¢panelçŠ¶æ€
        this.panelType = &apos;date&apos;
    &#125;
&#125;,
selectDate (date) &#123;
    //validate logic above...
    //ä¸€æ¬¡æ€§å…¨éƒ¨èµ‹å€¼
    this.year = tmpYear
    this.month = tmpMonth
    this.date = date.value
    this.value = `$&#123;this.tmpYear&#125;-$&#123;(&apos;0&apos; + (this.month + 1)).slice(-2)&#125;-$&#123;(&apos;0&apos; + this.date).slice(-2)&#125;`
    //é€‰æ‹©å®Œæ—¥æœŸåï¼Œpanelè‡ªåŠ¨éšè—
    this.panelState = false
&#125;
</code></pre><h2 id="æœ€å¤§-å°æ—¶é—´é™åˆ¶"><a href="#æœ€å¤§-å°æ—¶é—´é™åˆ¶" class="headerlink" title="æœ€å¤§/å°æ—¶é—´é™åˆ¶"></a>æœ€å¤§/å°æ—¶é—´é™åˆ¶</h2><p>æœ€å¤§/å°å€¼æ˜¯éœ€è¦ä»çˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥çš„ï¼Œå› æ­¤åº”è¯¥ä½¿ç”¨<code>props</code>ï¼Œå¦å¤–ï¼Œè¿™ä¸ªå€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿåº”è¯¥å¯ä»¥æ˜¯å˜é‡(æ¯”å¦‚åŒæ—¶å­˜åœ¨ä¸¤ä¸ªdatepickerï¼Œç¬¬äºŒä¸ªçš„æ—¥æœŸä¸èƒ½æ¯”ç¬¬ä¸€ä¸ªå¤§è¿™ç§é€»è¾‘)ï¼Œæ‰€ä»¥åº”è¯¥ä½¿ç”¨<a target="_blank" rel="noopener" href="http://vuejs.org.cn/api/#v-bind">Dynamically bind</a>çš„æ–¹å¼ä¼ å€¼ã€‚</p>
<pre><code>&lt;datepicker :value.sync=&quot;start&quot;&gt;&lt;/datepicker&gt;
&lt;!-- ç°åœ¨minçš„å€¼ä¼šéšç€startçš„å˜åŒ–è€Œå˜åŒ– --&gt;
&lt;datepicker :value.sync=&quot;end&quot; :min=&quot;start&quot; &gt;&lt;/datepicker&gt;
</code></pre><p>å¢åŠ äº†é™åˆ¶æ¡ä»¶ï¼Œå¯¹äºä¸åˆæ³•çš„æ—¥æœŸï¼Œå…¶æŒ‰é’®åº”è¯¥å˜ä¸ºç½®ç°çŠ¶æ€ï¼Œæˆ‘ç”¨äº†æ¯”è¾ƒæ—¶é—´æˆ³çš„æ–¹å¼æ¥åˆ¤æ–­æ—¥æœŸæ˜¯å¦åˆæ³•ï¼Œå› ä¸ºå°±ç®—å½“å‰panelä¸­çš„æ—¥æœŸæ˜¯è·¨å¹´æˆ–æ˜¯è·¨æœˆçš„ï¼Œé€šè¿‡æ—¥æœŸæ„é€ å‡½æ•°åˆ›å»ºæ—¶éƒ½ä¼šå¸®ä½ è½¬æ¢æˆå¯¹åº”çš„åˆæ³•å€¼ï¼Œçœå»å¾ˆå¤šåˆ¤æ–­çš„éº»çƒ¦ï¼š</p>
<pre><code>new Date(2015, 0, 0).getTime() === new Date(2014, 11, 31).getTime() //true
new Date(2015, 12, 0).getTime() === new Date(2016, 0, 0).getTime() //true
</code></pre><p>å› æ­¤éªŒè¯æ—¥æœŸæ˜¯å¦åˆæ³•çš„å‡½æ•°æ˜¯è¿™æ ·çš„:</p>
<pre><code>validateDate (date) &#123;
  let mon = this.tmpMonth
  if(date.previousMonth)&#123;
      mon -= 1
  &#125;else if(date.nextMonth)&#123;
      mon += 1
  &#125;
  if(new Date(this.tmpYear, mon, date.value).getTime() &gt;= new Date(this.minYear, this.minMonth - 1, this.minDate).getTime()
      &amp;&amp; new Date(this.tmpYear, mon, date.value).getTime() &lt;= new Date(this.maxYear, this.maxMonth - 1, this.maxDate).getTime())&#123;
      return false
  &#125;
  return true
</code></pre><p>  }</p>
<h2 id="åŠ¨æ€è®¡ç®—ä½ç½®"><a href="#åŠ¨æ€è®¡ç®—ä½ç½®" class="headerlink" title="åŠ¨æ€è®¡ç®—ä½ç½®"></a>åŠ¨æ€è®¡ç®—ä½ç½®</h2><p>å½“é¡µé¢å³ä¾§æœ‰è¶³å¤Ÿçš„ç©ºé—´æ˜¾ç¤ºæ—¶ï¼Œdatepickerçš„panelä¼šå®šä½ä¸ºç›¸å¯¹äºçˆ¶å…ƒç´ <code>left: 0</code>çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œåˆ™åº”è¯¥ç½®äº<code>right: 0</code>çš„ä½ç½®ï¼Œè¿™ä¸€ç‚¹å¯ä»¥é€šè¿‡Vueæä¾›çš„åŠ¨æ€æ ·å¼å’Œæ ·å¼å¯¹è±¡æ¥å®ç°(åŠ¨æ€classå’ŒåŠ¨æ€styleå…¶å®åªæ˜¯åŠ¨æ€propsçš„ç‰¹ä¾‹)ï¼Œè€Œè®¡ç®—ä½ç½®çš„æ—¶åˆ»ï¼Œæˆ‘æ”¾åœ¨äº†ç»„ä»¶å£°æ˜å‘¨æœŸçš„<code>ready</code>å‘¨æœŸä¸­ï¼Œå› ä¸ºè¿™æ—¶ç»„ä»¶å·²ç»æ’å…¥åˆ°DOMæ ‘ä¸­ï¼Œå¯ä»¥è·å–styleè¿›è¡ŒåŠ¨æ€è®¡ç®—ï¼š</p>
<pre><code>ready () &#123;
    if(this.$el.parentNode.offsetWidth + this.$el.parentNode.offsetLeft - this.$el.offsetLeft &lt;= 300)&#123;
        this.coordinates = &#123;right: &apos;0&apos;, top: `$&#123;window.getComputedStyle(this.$el.children[0]).offsetHeight + 4&#125;px`&#125;
    &#125;else&#123;
        this.coordinates = &#123;left: &apos;0&apos;, top: `$&#123;window.getComputedStyle(this.$el.children[0]).offsetHeight + 4&#125;px`&#125;
    &#125;
&#125;
&lt;!-- templateä¸­å¯¹åº”çš„åŠ¨æ€style --&gt;
&lt;div :style=&quot;coordinates&quot;&gt;&lt;/div&gt;
</code></pre><p>ä¸ºäº†panelçš„æ˜¾éšå¯ä»¥å¹³æ»‘è¿‡æ¸¡ï¼Œå¯ä»¥ä½¿ç”¨<code>transition</code>åšè¿‡æ¸¡åŠ¨ç”»ï¼Œè¿™é‡Œæˆ‘ç®€å•åœ°é€šè¿‡ä¸€ä¸ª0.2ç§’çš„é€æ˜åº¦è¿‡æ¸¡è®©æ˜¾éšæ›´å¹³æ»‘ã€‚</p>
<pre><code>&lt;div :style=&quot;this.coordinates&quot; v-show=&quot;panelState&quot; transition=&quot;toggle&quot;&gt;&lt;/div&gt;

//less syntax
.toggle&#123;
    &amp;-transition&#123;
        transition: all ease .2s;
    &#125;
    &amp;-enter, &amp;-leave&#123;
        opacity: 0;
    &#125;
&#125;
</code></pre><h2 id="ä¸­è‹±æ–‡åˆ‡æ¢"><a href="#ä¸­è‹±æ–‡åˆ‡æ¢" class="headerlink" title="ä¸­è‹±æ–‡åˆ‡æ¢"></a>ä¸­è‹±æ–‡åˆ‡æ¢</h2><p>è¿™é‡Œå…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œè¿™ç§å¤šè¯­è¨€åˆ‡æ¢å®è´¨å°±æ˜¯ä¸€ä¸ªkeyæ ¹æ®ä¸åŒçš„typeè€Œè¾“å‡ºä¸åŒçš„valueï¼Œæ‰€ä»¥ä½¿ç”¨filterå¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°å®ƒï¼æ¯”å¦‚æ¸²æŸ“æ˜ŸæœŸçš„åˆ—è¡¨:</p>
<pre><code>&lt;ul class=&quot;weeks&quot;&gt;
     &lt;li v-for=&quot;item in weekList&quot; v-text=&quot;item | week language&quot;&gt;&lt;/li&gt;
 &lt;/ul&gt;

filters : &#123;
    week (item, lang)&#123;
        switch (lang) &#123;
          case &apos;en&apos;:
              return &#123;0: &apos;Su&apos;, 1: &apos;Mo&apos;, 2: &apos;Tu&apos;, 3: &apos;We&apos;, 4: &apos;Th&apos;, 5: &apos;Fr&apos;, 6: &apos;Sa&apos;&#125;[item]
          case &apos;ch&apos;:
              return &#123;0: &apos;æ—¥&apos;, 1: &apos;ä¸€&apos;, 2: &apos;äºŒ&apos;, 3: &apos;ä¸‰&apos;, 4: &apos;å››&apos;, 5: &apos;äº”&apos;, 6: &apos;å…­&apos;&#125;[item]
          default:
              return item
      &#125;
    &#125;
&#125;
</code></pre><h2 id="å¤šç§ä½¿ç”¨æ–¹å¼"><a href="#å¤šç§ä½¿ç”¨æ–¹å¼" class="headerlink" title="å¤šç§ä½¿ç”¨æ–¹å¼"></a>å¤šç§ä½¿ç”¨æ–¹å¼</h2><p>å¯¹äºä¸€ä¸ªVueç»„ä»¶ï¼Œå¦‚æœæ˜¯ä½¿ç”¨<code>webpack + vue-loader</code>çš„<code>.vue</code>å•æ–‡ä»¶å†™æ³•ï¼Œæˆ‘å¸Œæœ›è¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code>//App.vue
&lt;script&gt;
    import datepicker from &apos;path/to/datepicker.vue&apos;
    export default &#123;
        components: &#123; datepicker&#125;
    &#125;
&lt;/script&gt;
</code></pre><p>å¦‚æœæ˜¯ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆæˆ‘å¸Œæœ›<code>datepicker</code>è¿™ä¸ªç»„ä»¶æ˜¯æš´éœ²åœ¨å…¨å±€ä¸‹çš„ï¼Œå¯ä»¥è¿™ä¹ˆä½¿ç”¨ï¼š</p>
<pre><code>//index.html
&lt;html&gt;
    &lt;script src=&quot;path/to/vue.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;path/to/datepicker.js&quot;&gt;&lt;/script&gt;
    &lt;body&gt;
        &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
        &lt;script&gt;
            new Vue(&#123;
                el: &apos;#app&apos;,
                components: &#123; datepicker &#125;
            &#125;)
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>è¿™é‡Œæˆ‘é€‰æ‹©äº†webpackä½œä¸ºæ‰“åŒ…å·¥å…·ï¼Œä½¿ç”¨webpackçš„<code>output.library</code>å’Œ<code>output.linraryTarget</code>è¿™ä¸¤ä¸ªå±æ€§å°±å¯ä»¥æŠŠä½ çš„bundleæ–‡ä»¶ä½œä¸ºåº“æ–‡ä»¶æ‰“åŒ…ã€‚<code>library</code>å®šä¹‰äº†åº“çš„åå­—ï¼Œ<code>libraryTarget</code>å®šä¹‰äº†ä½ æƒ³è¦æ‰“åŒ…çš„æ ¼å¼ï¼Œå…·ä½“å¯ä»¥çœ‹æ–‡æ¡£ã€‚æˆ‘å¸Œæœ›è‡ªå·±çš„åº“å¯ä»¥é€šè¿‡<code>datepicker</code>åŠ è½½åˆ°ï¼Œå¹¶ä¸”æ‰“åŒ…æˆ<code>umd</code>æ ¼å¼ï¼Œå› æ­¤æˆ‘çš„<code>webpack.config.js</code>æ˜¯è¿™æ ·çš„:</p>
<pre><code>module.exports = &#123;
    entry: &apos;./src/Datepicker.vue&apos;,
    output: &#123;
        path: path.resolve(__dirname, &apos;./&apos;),
        library: &apos;datepicker&apos;,
        filename: &apos;index.js&apos;,
        libraryTarget: &apos;umd&apos;
    &#125;,
    module: &#123;
        loaders: [
            &#123;test: /\.vue$/, loaders: [&apos;vue&apos;]&#125;,
            &#123;test: /\.js$/, exclude: /node_modules/, loaders: [&apos;babel&apos;]&#125;
        ]
    &#125;
&#125;
</code></pre><p>æ‰“åŒ…å®Œæˆçš„æ¨¡å—å°±æ˜¯ä¸€ä¸ª<code>umd</code>æ ¼å¼çš„æ¨¡å—å•¦ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç›´æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é…åˆrequire.jsç­‰æ¨¡å—åŠ è½½å™¨ä½¿ç”¨ï¼</p>
<h2 id="é€‚é…-Vue-2-x"><a href="#é€‚é…-Vue-2-x" class="headerlink" title="é€‚é… Vue 2.x"></a>é€‚é… Vue 2.x</h2><p>Vue 2.0å·²ç»å‘å¸ƒæœ‰æ®µæ—¶é—´äº†ï¼Œç°åœ¨æŠŠä¹‹å‰çš„ç»„ä»¶é€‚é…åˆ°Vue 2.0ã€‚è¿ç§»è¿‡ç¨‹è¿˜æ˜¯å¾ˆé¡ºåˆ©çš„ï¼Œæ ¸å¿ƒAPIæ”¹åŠ¨ä¸å¤§ï¼Œå¯ä»¥å€ŸåŠ©<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-migration-helper">vue-migration-helper</a>æ¥æ‰¾å‡ºåºŸå¼ƒçš„APIå†é€æ­¥ä¿®æ”¹ã€‚è¿™é‡Œåªåˆ—ä¸¾ä¸€äº›æˆ‘éœ€è¦ä¿®æ”¹çš„APIã€‚</p>
<h2 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h2><p>2.0ä¸­çš„filteråªèƒ½åœ¨mustacheç»‘å®šä¸­ä½¿ç”¨ï¼Œå¦‚æœæƒ³åœ¨æŒ‡ä»¤å¼ç»‘å®šä¸­ç»‘å®šè¿‡æ»¤åçš„å€¼ï¼Œå¯ä»¥é€‰æ‹©è®¡ç®—å±æ€§ã€‚æˆ‘åœ¨æœˆä»½å’Œæ˜ŸæœŸçš„æ˜¾ç¤ºä¸­ä½¿ç”¨åˆ°äº†è¿‡æ»¤å™¨æ¥è¿‡æ»¤è¯­è¨€ç±»å‹ï¼Œä½†æˆ‘ä¹‹å‰æ˜¯åœ¨æŒ‡ä»¤å¼ç»‘å®šä¸­ä½¿ç”¨çš„filterï¼Œæ‰€ä»¥éœ€è¦å¦‚ä¸‹ä¿®æ”¹ï¼Œï¼š</p>
<pre><code>//ä¿®æ”¹å‰
&lt;div class=&quot;month-box&quot; @click=&quot;chType(&apos;month&apos;)&quot; v-text=&quot;tmpMonth + 1 | month language&quot;&gt;&lt;/div&gt;
//ä¿®æ”¹åï¼Œfilterä¼ å‚çš„æ–¹å¼ä¹Ÿå˜äº†ï¼Œå˜æˆäº†å‡½æ•°è°ƒç”¨çš„é£æ ¼
&lt;div class=&quot;month-box&quot; @click=&quot;chType(&apos;month&apos;)&quot;&gt;{{tmpMonth + 1 | month(language)}}&lt;/div&gt;
</code></pre><h2 id="ç§»é™¤-indexå’Œ-key"><a href="#ç§»é™¤-indexå’Œ-key" class="headerlink" title="ç§»é™¤$indexå’Œ$key"></a>ç§»é™¤<code>$index</code>å’Œ<code>$key</code></h2><p>è¿™ä¸¤ä¸ªå±æ€§ä¸ä¼šåœ¨<code>v-for</code>ä¸­è¢«è‡ªåŠ¨åˆ›å»ºäº†ï¼Œå¦‚éœ€ä½¿ç”¨ï¼Œè¦åœ¨<code>v-for</code>ä¸­è‡ªè¡Œå£°æ˜ï¼š</p>
<pre><code>&lt;li v-for=&quot;item in monthList&quot; @click=&quot;selectMonth($index)&quot;&gt;&lt;/li&gt;
//
&lt;li v-for=&quot;(item, index) in monthList&quot; @click=&quot;selectMonth(index)&quot;&gt;&lt;/li&gt;
</code></pre><h2 id="readyç”Ÿå‘½å‘¨æœŸç§»é™¤"><a href="#readyç”Ÿå‘½å‘¨æœŸç§»é™¤" class="headerlink" title="readyç”Ÿå‘½å‘¨æœŸç§»é™¤"></a><code>ready</code>ç”Ÿå‘½å‘¨æœŸç§»é™¤</h2><p><code>ready</code>ä»ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­ç§»é™¤äº†ï¼Œè¿ç§»æ–¹æ³•å¾ˆç®€å•ï¼Œä½¿ç”¨<code>mounted</code>å’Œ<code>this.$nextTick</code>æ¥æ›¿æ¢ã€‚</p>
<h2 id="prop-syncå¼ƒç”¨"><a href="#prop-syncå¼ƒç”¨" class="headerlink" title="prop.syncå¼ƒç”¨"></a><code>prop.sync</code>å¼ƒç”¨</h2><p><code>prop</code>çš„<code>sync</code>å¼ƒç”¨äº†ï¼Œè¿ç§»æ–¹æ¡ˆæ˜¯ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶ï¼Œè€Œä¸”Datepickerè¿™ç§inputç±»å‹ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨<a target="_blank" rel="noopener" href="http://vuejs.org/guide/components.html#Form-Input-Components-using-Custom-Events">è¡¨å•è¾“å…¥ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶</a>ä½œä¸ºæ›¿æ¢æ–¹æ¡ˆã€‚è‡ªå®šä¹‰ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨<code>v-model</code>æŒ‡ä»¤äº†ï¼Œä½†æ˜¯å¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li>æ¥æ”¶ä¸€ä¸ª<code>value</code>çš„<code>prop</code></li>
<li>å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘ä¸€ä¸ª<code>input</code>äº‹ä»¶ï¼Œä¼ å…¥æ–°å€¼ã€‚</li>
</ol>
<p>æ‰€ä»¥Datepickerçš„ä½¿ç”¨æ–¹å¼ä¹Ÿä¸æ˜¯<code>&lt;datepicker value.sync=&quot;now&quot;&gt;&lt;/datepicker&gt;</code>äº†ï¼Œè€Œæ˜¯<code>&lt;datepicker v-model=&quot;now&quot;&gt;&lt;/datepicker&gt;</code>ã€‚ç»„ä»¶è‡ªèº«å‘çˆ¶çº§ä¼ å€¼çš„æ–¹å¼ä¹Ÿä¸ä¸€æ ·äº†ï¼š</p>
<pre><code>//1.xç‰ˆæœ¬ï¼Œè®¾ç½®äº†valueçš„å€¼ä¼šåŒæ­¥åˆ°çˆ¶çº§
this.value = `$&#123;this.tmpYear&#125;-$&#123;(&apos;0&apos; + (this.month + 1)).slice(-2)&#125;-$&#123;(&apos;0&apos; + this.date).slice(-2)&#125;`

//2.xç‰ˆæœ¬ï¼Œéœ€è¦è‡ªå·±è§¦å‘inputäº‹ä»¶ï¼Œå°†æ–°å€¼ä½œä¸ºå‚æ•°ä¼ é€’å›å»
let value = `$&#123;this.tmpYear&#125;-$&#123;(&apos;0&apos; + (this.month + 1)).slice(-2)&#125;-$&#123;(&apos;0&apos; + this.date).slice(-2)&#125;`
this.$emit(&apos;input&apos;, value)
</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨å†™è¿™ä¸ªdatepickeræ—¶çš„å¤§è‡´æ€è·¯ï¼Œæœ¬èº«ä¹Ÿæ˜¯å¾ˆç®€å•çš„äº‹æƒ…ï¼Œæ²¡æœ‰å¤„å¤„å±•å¼€æ¥è¯´ï¼Œå†™åœ¨è¿™é‡Œä½œä¸ºè‡ªå·±çš„ä¸€ä¸ªæ€»ç»“ï¼Œå¦‚æœæœ‰åˆšå¼€å§‹ä½¿ç”¨Vueçš„åŒå­¦ä¹Ÿå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥åœ¨æ€è·¯ä¸Šå¸®åŠ©åˆ°ä½ ä»¬:Pï¼Œå¯¹äºå„ä½è€é¸Ÿå¦‚æœæœ‰ä»€ä¹ˆæŒ‡ç‚¹çš„åœ°æ–¹æˆ‘ä¹Ÿå¾ˆæ„Ÿè°¢:Dï¼Œé‚£ä¹ˆå·®ä¸å¤šå°±è¿™æ ·ï¼Œåé¢è´´ä¸€äº›ç›¸å…³æ¨èé˜…è¯»ã€‚</p>
<h4 id="æ¨èé˜…è¯»"><a href="#æ¨èé˜…è¯»" class="headerlink" title="æ¨èé˜…è¯»"></a>æ¨èé˜…è¯»</h4><p><a target="_blank" rel="noopener" href="http://www.jstips.co/zh_cn/insert-item-inside-an-array/">é«˜æ•ˆåœ°å‘æ•°ç»„ä¸­æ’å€¼</a><br><a target="_blank" rel="noopener" href="http://vuejs.org.cn/guide/components.html#ç‰‡æ–­å®ä¾‹">Vue.js-ç‰‡æ®µå®ä¾‹</a><br><a target="_blank" rel="noopener" href="http://vuejs.org.cn/api/#v-bind">Vue.js-åŠ¨æ€ç»‘å®š</a><br><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date">Jsæ—¥æœŸå¯¹è±¡åŸºç¡€</a><br><a target="_blank" rel="noopener" href="http://webpack.github.io/docs/configuration.html#output-library">Webpack: export bundle as library</a><br><a target="_blank" rel="noopener" href="https://github.com/umdjs/umd">UMD(universial Module Defination)</a></p>

    </section>
    
        <section id="comments">
        
        </section>
    
</article>

    </div>
    <button class="feedback-btn" data-feedbackok-trigger>Hello~ ğŸ¥°</button>
    <footer>
    <div class="info"><span>Powered By <a href="https://hexo.io/" target="blank">Hexo</a></span>&nbsp;&nbsp;&nbsp;&nbsp;<span>Theme by <a href="https://github.com/showonne/hexo_showonne" target="blank">Showonne</a></span></div>
</footer>
    <script
        src="https://cdn.feedbackok.com/widget.js"
        data-pid="0m524p3"
        async
        defer
    ></script>
    
<script src="/js/index.js"></script>

</body>
</html>
